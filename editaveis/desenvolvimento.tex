\chapter{Desenvolvimento}
  \section{Requisitos}
	Para cada frente do projeto foram definidos os seguintes requisitos.
	\subsection{Frente de Software}
	\begin{itemize}
		\item Conexão com o servidor do google.
		\item Mostrar as rotas percorridas pela bicicleta.
		\item Definir rotas de acordo com o solicitado pelo usuário.
		\item Enviar informações de rotas para o controlador na bicicleta.
		\item Mostrar dados de distância percorrida.
		\item Mostrar dados de tempo gasto de uma rota percorrida.
		\item Salvar dados no servidor.
		\item Gerar gráfico estatístico do usuário.
	\end{itemize}
 
  \section{Software}
  O escopo do projeto de software busca determinar as fronteiras do projeto em quesitos de processamento e interface, e sua interação direta e indireta com o usuário e com a parte eletroeletrônica do projeto.

Esta seção abordará desde nível mais alto do projeto, contemplando as especificações do aplicativo, ao nível mais baixo, contemplando a comunicação entre o aplicativo e o micro controlador.

	\subsection{Aplicativo}
O projeto de processamento e interface consistirá num aplicativo cujo objetivo central é traçar rotas entre os pontos escolhidos pelo usuário e passar essas informações ao micro controlador responsável por acender os painéis luminosos na tela oled. 
Em segundo plano estará o painel do usuário, onde ele poderá se cadastrar e acompanhar suas rotas, assim como algumas estatísticas sobre seus percursos.

A partir desses objetivos principais, foi criado as features para o projeto. O diagrama a seguir contempla o diagrama de features do sistema:

%\graphicspath{{figuras/}}
\begin{figure}[!htb]
	\centering
	\includegraphics[scale=0.80]{features.jpg}
	\caption{Diagrama de Features}
	\label{img:features}
\end{figure}

Assim foi criado o Product Backlog contemplando uma lista de funcionalidades que são as histórias de usuário que estão vinculadas às features. Artefato importantíssimo que proporciona uma visão macro do projeto. Para melhor visualização, os itens foram divididos em três listas distintas:

A primeira lista, que pode ser vista na figura \ref{img:figura1} contempla os itens críticos ou de alta prioridade.

\graphicspath{{figuras/}}
\begin{figure}[!htb]
\centering
\includegraphics[scale=0.80]{figura1}
\caption{\textit{Backlog} 1}
\label{img:figura1}
\end{figure}

A segunda lista pode ser vista na figura \ref{img:figura2} e evidencia os itens de prioridade normal.

\newpage

\graphicspath{{figuras/}}
\begin{figure}[!htb]
\centering
\includegraphics[scale=0.80]{figura2}
\caption{\textit{Backlog} 2}
\label{img:figura2}
\end{figure}

Por fim, a terceira lista mostrada na figura \ref{img:figura3} trata os itens de menor relevância ou de prioridade baixa.

\graphicspath{{figuras/}}
\begin{figure}[!htb]
\centering
\includegraphics[scale=0.80]{figura3}
\caption{\textit{Backlog} 3}
\label{img:figura3}
\end{figure}

\subsubsection{Solução Técnica}
Nesta seção serão apresentadas as evoluções da subárea de software no decorrer do projeto até a presente data.

O sistema em desenvolvimento compõe:
\begin{itemize}
	\item Aplicação mobile desenvolvida utilizando o framework de desenvolvimento 
	nativo do facebook, React Native;
	\item Servidor de aplicação utilizando Node.JS, servidor que executa o V8 JavaScript,
	interpretador de JavaScript desenvolvido e utilizado pelo google. 
\end{itemize}

O ambiente de desenvolvimento compõe:
\begin{itemize}
	\item Sistema operacional OSX Sierra 10.12.4
	\item Node Versão 5.8.0
	\item React Versão 15.4.0
\end{itemize}

As features implementadas até o ponto de controle 2 foram o mapa e orientação de rotas, o perfil de usuário e autenticação e design e layout.

Pode-se observar que a feature de integração do módulo bluetooth será implementada para o ponto de controle 3, assim como a realização de melhorias no layout e design.

As figuras a seguir mostram algumas telas da execução do aplicativo atualmente:

%\graphicspath{{figuras/}}
\begin{figure}[!htb]
	\centering
	\includegraphics[scale=0.50]{tela_inicial.jpg}
	\caption{Tela Inicial}
	\label{img:telainicial}
\end{figure}

\newpage

\begin{figure}[!htb]
	\centering
	\includegraphics[scale=0.50]{tela_introducao.jpg}
	\caption{Tela de Introdução}
	\label{img:telaintroducao}
\end{figure}

\begin{figure}[!htb]
	\centering
	\includegraphics[scale=0.50]{tela_cadastro.jpg}
	\caption{Tela de Cadastro}
	\label{img:telacadastro}
\end{figure}

\begin{figure}[!htb]
	\centering
	\includegraphics[scale=0.50]{tela_mapa.jpg}
	\caption{Tela de Mapa}
	\label{img:telamapa}
\end{figure}

\begin{figure}[!htb]
	\centering
	\includegraphics[scale=0.50]{tela_orientacao.jpg}
	\caption{Tela de Orientação}
	\label{img:telaorientacao}
\end{figure}

\begin{figure}[!htb]
	\centering
	\includegraphics[scale=0.50]{tela_pareamento.jpg}
	\caption{Tela de Pareamento}
	\label{img:telapareamento}
\end{figure}

	\subsection{Arquitetura}
	Aplicativos híbridos são aplicativos feitos utilizando tecnologias web, que depois são convertidos em um aplicativo instalável para celulares e smartphones. Esse tipo de aplicativo funciona como qualquer outro aplicativo e é publicado na loja normalmente.

O React-Native é um projeto desenvolvido pelos engenheiros do Facebook  que consiste em uma série de ferramentas que tornam possível a criação de aplicações Android e iOS. Alguns fatores foram levados em conta para a decisão de se desenvolver um aplicativo híbrido utilizando React-Native neste projeto:

\begin{itemize}
\item Possibilidade de desenvolver aplicativos Android e iOS com apenas uma base de código;
\item Possibilidade de utilizar componentes nativos de cada sistema operacional, desta forma podendo manter a aparência e experiência do aplicativo, consistentes;
\item Compatibilidade com diversas bibliotecas de terceiros,  por exemplo a react-native-ble  com a qual é possível implementar conexões bluetooth;
\item Baixo uso de memória;
\item Conhecimento prévio da equipe de desenvolvimento;
\item Forte comunidade já formada.

\end{itemize}

	Para a comunicação externa, ou seja, para o processamento, será utilizada arquitetura em serviços RESTful.
O design de uma arquitetura REST, segue o padrão evidenciado na figura \ref{img:arquitetura}

\graphicspath{{figuras/}}
\begin{figure}[!htb]
\centering
\includegraphics[scale=0.80]{arquitetura}
\caption{Arquitetura REST}
\label{img:arquitetura}
\end{figure}


Ou seja, o sistema se baseia em requisições cliente-servidor. São criados vários módulos seguindo o modelo requisição-resposta, onde no caso do atual projeto cada requisição feita a partir do aplicativo gera uma resposta enviada pelo servidor, a resposta é formatada e mostrada ao usuário de forma visual agradável. Como protocolo de comunicação são utilizados métodos HTTP, principalmente os 4 principais métodos.

\begin{itemize}
\item GET – Utilizado para requisições onde um dado é buscado
\item POST – Utilizado para requisições onde um dado é inserido
\item PUT – Contempla requisições onde um dado é editado
\item DELETE – Aborda requisições onde dados são excluídos

\end{itemize}
	
	Para a utilização do DELETE, optou-se por utilizar a forma de deleção lógica, onde um dado jamais é apagado da base, o que acontece é a utilização de uma flag para indicar que o dado não existe mais. Esse esquema possibilita a criação de um log de alterações e deleções sem a perda de dado algum.
	
\subsubsection{Diagrama de Classes}
O diagrama de classes é a representação da estrutura e relações das classes que servem de modelo para objetos.


\begin{figure}[!htb]
	\centering
	\includegraphics[width=0.9\textwidth]{arquitetura_bike.jpg}
	\caption{Diagrama de Classes}
	\label{img:diagramaclasse}
\end{figure}

\subsection{Google Maps API}
Para obter a direção das rotas, será utilizada a API pública do Google Maps, com o benefício de trazer ao aplicativo desenvolvido, toda a precisão de cálculo e processamento encontrado no Google Maps.
O Google disponibiliza uma API pública para a comunicação entre seu servidor e  softwares em geral.

Para a utilização desta API, primeiramente é necessário gerar uma chave de utilização com uma conta de desenvolvedor do Google já existente. Feito isto, basta incluir o script disponibilizado pelo Google, onde for necessária a utilização deste script. 

No caso do atual projeto, será utilizada a API versão 3 que possui algumas funcionalidades como por exemplo a consulta de rotas, em que as versões 1 e 2 da API não possuem.

Para incluir o script da versão 3 basta utilizar o código JavaScript abaixo

\graphicspath{{figuras/}}
\begin{figure}[!htb]
\centering
\includegraphics[width=\textwidth]{codigo1}
\caption{Código 1}
\label{img:codigo1}
\end{figure}

Que é completamente compatível com as tecnologias utilizadas no projeto. Observa-se a especificação da versão no primeiro parâmetro da URL, onde v=3. Caso esse parâmetro fosse emitido, o script carregado seria o da versão 1.0 que possui algumas limitações em relação à funcionalidades.

Para a aplicação das funcionalidades, foi produzido um protótipo da utilização da API, para constatar que esta supriria todas as necessidades principais do projeto.

O primeiro passo após a inclusão do Script, foi definir o ponto inicial para cálculo da rota. No protótipo desenvolvido, foi utilizado o meio do ICC no campus Darcy Ribeiro como ponto inicial.

\graphicspath{{figuras/}}
\begin{figure}[!htb]
\centering
\includegraphics[scale=0.80]{codigo2}
\caption{Código 2}
\label{img:codigo2}
\end{figure}

Em seguida, o objeto mapa foi criado e instanciado na camada de visualização da aplicação.	
	
\graphicspath{{figuras/}}
\begin{figure}[!htb]
\centering
\includegraphics[scale=0.80]{codigo3}
\caption{Código 3}
\label{img:codigo3}
\end{figure}

Ainda foi aplicada uma camada de visualização em cima do mapa, mostrando um mapa detalhado sobre o campus Darcy Ribeiro.

\graphicspath{{figuras/}}
\begin{figure}[!htb]
\centering
\includegraphics[scale=0.80]{codigo4}
\caption{Código 4}
\label{img:codigo4}
\end{figure}

A seguir foi desenhado um pino, apenas para representar a posição inicial.

\graphicspath{{figuras/}}
\begin{figure}[!htb]
\centering
\includegraphics[scale=0.80]{codigo5}
\caption{Código 5}
\label{img:codigo5}
\end{figure}

\newpage

O resultado obtido encontra-se na figura \ref{img:mapa_unb}

\graphicspath{{figuras/}}
\begin{figure}[!htb]
\centering
\includegraphics[scale=0.80]{mapa_unb_1}
\caption{Mapa Universidade de Brasília}
\label{img:mapa_unb}
\end{figure}

Os pontos de início e fim são tratados e o serviço de rotas é acionado, retornando um objeto JSON com todos os passos de direções necessários a se chegar no destino desejado.

Cada passo é retornado seguindo um modelo específico, deve-se atentar para a sub-propriedade instructions do array steps. Por exemplo a primeira instrução para ir do ICC ao HUB é ‘Siga na direção Sudoeste em direção a UNB Área 1’. Essas instruções serão passadas por um parser e comunicadas ao micro controlador que se encarregará de comunica-las ao usuário de forma agradável.

No protótipo feito, foi traçada a rota a partir do serviço renderizador, disponibilizado também pela API do Google Maps. O resultado conseguido encontra-se na figura \ref{img:mapa_unb2}, mostrando o traçar de uma rota do ICC ao HUB

\graphicspath{{figuras/}}
\begin{figure}[!htb]
\centering
\includegraphics[scale=0.80]{mapa_unb_2}
\caption{Mapa Universidade de Brasília}
\label{img:mapa_unb2}
\end{figure}

\newpage

	\subsection{Protótipo}
	Alguns protótipo das telas foram feitos, para que se possa ter uma noção do produto final que se espera alcançar ao fim do projeto. Os protótipos são apresentados nas figuras \ref{img:logo}, \ref{img:mapa} e \ref{img:dados}.
	
	\graphicspath{{figuras/}}
	\begin{figure}[!htb]
	\centering
	\includegraphics[scale=0.40]{logo.jpeg}
	\caption{Tela de abertura do Aplicativo}
	\label{img:logo}
	\end{figure}

\newpage	

	\graphicspath{{figuras/}}
	\begin{figure}[!htb]
	\centering
	\includegraphics[scale=0.40]{mapa.jpeg}
	\caption{Tela exemplificando o funcionamento do mapa}
	\label{img:mapa}
	\end{figure}
	
\newpage
	
	\graphicspath{{figuras/}}
	\begin{figure}[!htb]
	\centering
	\includegraphics[scale=0.40]{dashboard.jpeg}
	\caption{Tela com os dados do Usuário}
	\label{img:dados}
	\end{figure}
	
	\subsection{Qualidade de Código}
	Para analisar a qualidade do código produzido, foi feito uma análise utilizando a ferramenta Code Climate.
	O Code Climate é uma ferramenta que analisa todos os arquivos do projeto em cada
	alteração, analisando fatores como itens de complexidade, branches, complexidade
	por método, duplicação de código, quantidade de vezes que o arquivo foi modificado e
	quantidade de linhas.
	Foi obtida nota 3.81 de um total de 4.0, pode ser considerada uma nota alta mas
	possível de ser melhorada, também foi adotado o padrão de código de JavaScript mundialmente conhecido do airbnb.
	
	\subsection{Plano de Integração}
	  A comunicação entre o celular e o microcontrolador será feita através de receptor \textit{bluetooth} acoplado ao microcontrolador. Para que seja feita essa comunicação, será utilizada a API do próprio sistema android para troca de informações via \textit{bluetooth}. Dentre os principais recursos que a API fornece, os que mais serão utilizados serão:
	  \begin{itemize}
	  	\item Busca por outros aparelhos \textit{bluetooth};
	  	\item Pareamento entre o adaptador \textit{bluetooth} e o dispositivo\textit{bluetooth};
	  	\item Conexão com \textit{sockets} específicos de outros aparelhos;
	  	\item Transferência de arquivos;
	  \end{itemize}
	  
	  Deve-se ressaltar que para a utilização do \textit{bluetooth} do aparelho é necessário que o dispositivo permita a utilização de tais recursos, sem essa permissão não é possível fazer a comunicação entre os dois dispositivos.  
  	Para realizar a busca do adaptador \textit{bluetooth} que estará instalado na placa microcontroladora será utilizado o seguinte trecho de código apresentado na figura \ref{img:bluetooth_enabled}
  	
  	\graphicspath{{figuras/}}
  	\begin{figure}[!htb]
  	\centering
  	\includegraphics[scale=0.60]{bluetooth_enabled}
  	\caption{Trecho de código exemplificando a comunicação \textit{bluetooth}}
  	\label{img:bluetooth_enabled}
  	\end{figure}
  	
  	Para garantir que o dispositivo \textit{bluetooth} será adicionado apenas uma vez, será utilzado um trecho de código parecido com o da figura \ref{img:bluetooth_devices}, que garante que para um dispositivo ser adicionado ele, não deve estar presente na lista de dispositivos previamente adicionados.
  	
  	\graphicspath{{figuras/}}
  	\begin{figure}[!htb]
  	\centering
  	\includegraphics[scale=0.60]{bluetooth_paired_devices}
  	\caption{Trecho de Código que garante que um dispositivo será adicionado apenas uma vez}
  	\label{img:bluetooth_devices}
  	\end{figure}
  	
  	Para que seja feita a transferência de dados entre os dispositivos, o Google (empresa responsável pela documentação da plataforma android), dispõe um trecho de código que serve como guia para implementação desta funcionalidade. Na figura \ref{img:trecho1} é criada uma classe que define as constantes que serão utilizadas ao longo do código.
  	
  	\graphicspath{{figuras/}}
  	\begin{figure}[!htb]
  	\centering
  	\includegraphics[scale=0.60]{classe_MyBluetoothService}
  	\caption{Neste trecho de código são definidas as constantes que serão utilizadas ao longo do código}
  	\label{img:trecho1}
  	\end{figure}
  
Na figura \ref{img:trecho2} é criada uma outra classe que é a classe que implementa a funcionalidade de troca de dados. Esta classe extende da classe Thread, seus atributos são do tipo \textit{BluetoothSocket}, \textit{InputStream}, \textit{OutputStream} e um \textit{array} de \textit{byte}.

\graphicspath{{figuras/}}
\begin{figure}[!htb]
\centering
\includegraphics[scale=0.80]{classe_ConnectedThread}
\caption{Nesta classe são implementados os métodos responsáveis pelo funcionamento da troca de dados}
\label{img:trecho2}
\end{figure}

A figura \ref{img:trecho3} apresenta o método \textit{"run"} que funciona em segundo plano constantemente. Este método é responsável por ficar aguardando uma requisição do dispositivo.

\newpage

\graphicspath{{figuras/}}
\begin{figure}[!htb]
\centering
\includegraphics[scale=0.80]{run_method}
\caption{Implementação do método \textit{run} que é responsável por receber as informações do dispositivo \textit{bluetooth}}
\label{img:trecho3}
\end{figure}

O método \textit{"write"} é que faz a escrita dos dados que serão enviados para o dispositivo, como pode ser visto na figura \ref{img:trecho4}.

\graphicspath{{figuras/}}
\begin{figure}[!htb]
\centering
\includegraphics[scale=0.80]{write_method}
\caption{Implementação do método \textit{write} que é responsável por escrever os dados que serão enviados}
\label{img:trecho4}
\end{figure}

Por último, o método \textit{"cancel"} que encerra a conexão com o dispositivo pareado, como mostrado na figura \ref{img:trecho5}.

\graphicspath{{figuras/}}
  \begin{figure}[!htb]
  \centering
  \includegraphics[scale=0.80]{cancel_method}
  \caption{Método \textit{"cancel"} que encerra a conexão com o dispositivo}
  \label{img:trecho5}
  \end{figure}  
  
<<<<<<< HEAD
	\subsection{Integração}
	A integração foi realizada com a equipe da frente de eletroeletrônica. Para a integração com a equipe, foi feita a conexão do software desenvolvido com o hardware utilizado. Para tal, foi utilizado o módulo bluetooth-serial-port que possibilita comunicarmos através da aplicação com uma determinada porta serial bluetooth do dispositivo.
	
	O primeiro passo tomado foi a conexão do dispositivo (computador ou celular) à conexão bluetooth gerada pelo módulo HC-06 utilizado em conjunto com a placa arduíno para abrir a porta Serial bluetooth. Com a conexão estabelecida, foi preciso visualizar a porta em que a conexão foi aberta e estabelecida. Conseguimos verificar a abertura de duas portas:
	
	\textbf{Serial Ports:}
	\begin{itemize}
		\item \textbf{/dev/cu.Bluetooth-Icoming-Port}
		\item \textbf{/dev/cu.HC-06-DevB}
	\end{itemize}
	
	Uma porta de entrada e uma porta de saída, como a comunicação acontecerá exclusivamente no envio de informações ao processador que irá reagir de acordo com os dados enviados, foi escolhida a porta /dev/cu.HC-06-DevB, que por padrão corresponde a porta COM4 do dispositivo.
	
	Com a conexão feita e a porta preparada para o envio de dados, a aplicação envia os dados periodicamente de acordo com as informações de rotas definidas pelo usuário e de acordo com os dados recebidos da API de mapas do Google.
	
	Para que ambas as partes possam se comunicar foi estabelecido um protocolo de comunicação, que pode ser visto a seguir:
	
	\begin{figure}[h!]
		\centering
		\includegraphics[scale=0.60]{protocolo1.png}
		\caption{Protocolo de comunicação}
		\label{img:Protocolo}
	\end{figure}
	
	\begin{figure}[h!]
		\centering
		\includegraphics[scale=0.60]{chegada.png}
		\caption{Pausa/Chegada}
		\label{img:Chegada}
	\end{figure}
	
	\begin{figure}[h!]
		\centering
		\includegraphics[scale=0.60]{fed.png}
		\caption{Frente/esquerda/direita}
		\label{img:fed}
	\end{figure}
	
	\begin{figure}[h!]
		\centering
		\includegraphics[scale=0.60]{rotatorias.png}
		\caption{Rotatórias}
		\label{img:Rotatoria}
	\end{figure}
		
	\begin{figure}[h!]
		\centering
		\includegraphics[scale=0.60]{retorno.png}
		\caption{Retorno}
		\label{img:Retorno}
	\end{figure}
	
	O segundo conjunto de valores, refere-se a distância indicada, e o próximo conjunto faz a diferenciação entre Kilometros e Metros.
	Por fim, o último conjunto de valores, encerra o envio do pacote de dados e é definido como o caracter terminado ‘/n’.
	
	Alguns exemplos podem ser vistos a seguir:
	
	Os seguintes códigos irão gerar como resultado as imagens na tela a seguir:

	
	\begin{figure}[h!]
		\centering
		\includegraphics[scale=0.60]{chegada_led.png}
		\caption{Chegada na tela}
		\label{img:Chegada_led}
	\end{figure}

	
	\begin{figure}[h!]
		\centering
		\includegraphics[scale=0.60]{rotatoria_led.png}
		\caption{Rotatória a 10 metros}
		\label{img:Rotatoria_led}
	\end{figure}
		
	
	\begin{figure}[h!]
		\centering
		\includegraphics[scale=0.60]{retorno_led.png}
		\caption{Retorno a 100 metros}
		\label{img:Retorno_led}
	\end{figure}
	
	\subsection{Testes}
	
	Para os testes da aplicação desenvolvida, foram desenvolvidos testes de integração, com o objetivo de testar a integração entre diferentes módulos do sistema, por exemplo testar o módulo de comunicação com suas respectivas dependências.
	
	Para o desenvolvimento dos testes, foi utilizado o framework PhantomJS. Que é um emulador de navegador que é executado no terminal da aplicação.
	
	Com o Phantom.JS instalado, conseguimos renderizar uma página no servidor, criando um objeto de página WEB:
	
	\begin{figure}[h!]
		\centering
		\includegraphics[scale=0.60]{renderiza_pagina.png}
		\caption{Renderização da página}
		\label{img:Renderiza_pagina}
	\end{figure}
	
	Utilizamos o módulo loadspeed.js para mensurar o tempo demandado para a execução de cada script e determinar a rapidez da aplicação.
	
	\newpage
	
	\begin{figure}[!htp]
		\centering
		\includegraphics[scale=0.60]{mensuracao_de_tempo.png}
		\caption{Mensuração de tempo}
		\label{img:Mensuracao_tempo}
	\end{figure}
	
	Por fim, os testes foram implementados utilizando asserções esperadas. Buscou-se testar todas as integrações possíveis para assegurar que a interação do software com o usuário e com o processador fosse feita da melhor e mais eficiente forma possível.
	
	\subsection{Análise Crítica e Verificação}
	Com base nos resultados obtidos foi possível atender aos requisitos definidos para o projeto que foram traçar a rota a partir do ponto inicial e o destino, parser dos dados das rotas, comunicação com o microcontrolador, cadastro e acesso de usuário,coleta e parser das estatísticas, visualização do perfil do usuário, login nas redes sociais e compartilhamento de corridas.
	
	Nos pontos de controles passados foram testados as a maior arte dos requisitos implementados. Sendo que no último ponto de controle foi realizado o teste para a comunicação com o microcontrolador, realizando o envio dos dados de rotas via bluetooth para o microcontrolador.
  
\section{Eletroeletrônica}
	
	\subsection{Requisitos}
	Em linhas gerais, o projeto busca facilitar a vida de ciclistas. Eles vão poder ter mais informações sobre os seus trajetos e dessa forma trafegar de forma mais segura. Além disso, a possibilidade de se integrar um sistema como esse numa bicicleta automaticamente torna o próprio ato algo mais próximo do dia a dia, incentivando mais e mais pessoas a trocarem seus meios principais de transporte e assim desafogando as grandes cidades. 
	Neste escopo, foram selecionados alguns requisitos básicos para o dispositivo. Esses não foram os únicos, porém foram os mais relevantes no desenho geral do sistema embarcado do projeto.
	
	\begin{comment} %Bruno pediu para retirar
	\subsection{Comunicação e sensoriamento}
	O projeto foi pensado para não ser algo muito invasivo no corpo da bicicleta. Ao mesmo tempo,  optou-se por utilizar comunicação com o celular do usuário de maneira sem fio, aproveitando-se de seu alto nível de integração, disponibilidade de bateria e localização tanto por GPS quanto por sinal de torres de celular disponíveis.
	\end{comment}
 
		

	\subsection{Sistema Embarcado}
	\subsubsection{Software}
	O sistema embarcado concebido é dividido em duas partes:

	\begin{itemize}
		\item \textbf{Sensor de velocidade}: Para ler o sensor de velocidade, foi criado uma função que conta quantas vezes o sensor ficou ativo num intervalo de 1 segundo. Essa leitura é feita por meio de interrupções , configuradas no programa principal. As imagens a seguir ilustram isso.
	\end{itemize}

	\graphicspath{{figuras/}}
	\begin{figure}[H]
		\centering
		\includegraphics[width=0.5\textwidth]{embarcado1.png}
		\caption{Inicialização do sensor com a porta Analógica e o aro da roda.}
		\label{img:embarcado1}
	\end{figure}
	\graphicspath{{figuras/}}

	\begin{figure}[H]
		\centering
		\includegraphics[width=0.7\textwidth]{embarcado2.png}
		\caption{Inicialização do timer e da interrupção.}
		\label{img:embarcado2}
	\end{figure}

	\graphicspath{{figuras/}}
	\begin{figure}[H]
		\centering
		\includegraphics[width=0.4\textwidth]{embarcado3.png}
		\caption{Função que é chamada a cada interrupção e contabiliza giros do sensor.}
		\label{img:embarcado3}
	\end{figure}

	\begin{itemize}
		\item \textbf{GPS}:  O visualizador de GPS foi feito utilizando-se a biblioteca u8glib. Ela é capaz de gerar gráficos para diversos monitores. A classe DisplayManager foi criada para facilitar a escrita no display, encapsulando as suas tarefas mais utilizadas e diferenciando o display que mostra velocidade do display que mostra dados do GPS.Outra classe criada foi a ProtocolManager, capaz de tratar os dados da serial, e simplificar a utilização do protocolo	
	\end{itemize}

	\graphicspath{{figuras/}}
	\begin{figure}[H]
		\centering
		\includegraphics[width=0.7\textwidth]{embarcado4.png}
		\caption{Inicialização do display e da classe DisplayManager, que irá auxiliar nas funções mais básicas}
		\label{img:embarcado4}
	\end{figure}

	A rotina principal a ser executada foi dessa forma muito simplificada, ficando da seguinte forma.
	\graphicspath{{figuras/}}
	\begin{figure}[H]
		\centering
		\includegraphics[width=0.5\textwidth]{embarcado5.png}
		\caption{Rotina Principal}
		\label{img:embarcado5}
	\end{figure}

	\subsubsection{Hardware}
	A implementação do software consiste em um microcontrolador que recebe as informações do sensor (pelo pino A0) e do GPS (via módulo Bluetooth, pinos RX e TX) e converte para dois displays O-led, conforme ilustrado no diagrama a seguir:

	\graphicspath{{figuras/}}
	\begin{figure}[H]
		\centering
		\includegraphics[width=0.7\textwidth]{embarcado6.jpg}
		\caption{Diagrama do hardware.}
		\label{img:embarcado6}
	\end{figure}

	Após a concepção do circuito, chegamos ao seguinte resultado:

	\graphicspath{{figuras/}}
	\begin{figure}[H]
		\centering
		\includegraphics[width=0.3\textwidth, angle=90]{embarcado7.jpg}
		\caption{Displays em funcionamento.}
		\label{img:embarcado7}
	\end{figure}

	Lembrando que as imagens do display de velocidade variam apenas na parte numérica, de acordo com os dados provindos do sensor. Já as imagens do display de GPS vão variar de acordo com a mensagem serial que o aplicativo vai enviar pro bluetooh, como pode ser exemplificado na imagem a seguir:

	\graphicspath{{figuras/}}
	\begin{figure}[H]
		\centering
		\includegraphics[width=0.3\textwidth]{embarcado8.jpg}
		\caption{Implementação do protocolo 0/0/0/0/1}
		\label{img:embarcado8}
	\end{figure}

	\graphicspath{{figuras/}}
	\begin{figure}[H]
		\centering
		\includegraphics[width=0.3\textwidth]{embarcado9.jpg}
		\caption{Implementação do protocolo 4/0/1/0/1}
		\label{img:embarcado9}
	\end{figure}
	\subsection{Motor}
	O motor utilizado no projeto será responsável por converter a energia elétrica em mecânica e enviar, por meio dos sensores hall, as informações da posição atual do motor para o microcontrolador.
	
	\graphicspath{{figuras/}}
	\begin{figure}[h!]
		\centering
		\includegraphics[width=0.5\textwidth]{Figura1_Motor.PNG}
		\caption{Motor com sensores hall acoplados internamente.}
		\label{img:Motor}
	\end{figure}

	O motor deve funcionar de modo que o ripple de torque não seja sentido pelo usuário, para isso as comutações das fases devem ser precisas e exatas. Ripple de torque são os picos de torque no motor, fazendo com que a bicicleta produza pequenos trancos ou vibrações.
	
	\subsection{Sensor de Efeito Hall}
	Os dados sobre a posição do motor são obtidos através de três sensores do tipo hall, localizados dentro do motor. Os sensores hall utilizados possuem o código 43AF. Para o correto funcionamento, é necessário o uso de resistores pull-up.
	
	\graphicspath{{figuras/}}
	\begin{figure}[h!]
		\centering
		\includegraphics[width=0.5\textwidth]{Figura2_Pull_UP.PNG}
		\caption{Esquemático para o resistor pull-up}
		\label{img:Pull_UP}
	\end{figure}

	\subsection{Acionamento do Motor}
		\subsubsection{Requisito}
		O sistema de acionamento deve fazer com que o motor gire em velocidade de acordo com a posição do acelerador. Todo o processamento dos dados obtidos pelos sensores hall, localizados no motor, passaram por algoritmos de controle e serão enviados aos transístores de potência. O controle da velocidade será feito utilizando pwm em cada um dos seis transistores. Haverá isolamento elétrico, através de optoacopladores, para proteção do sistema de acionamento.
		De acordo com a posição atual, do motor e do acelerador, o sistema ativa o conjunto de optoacopladores, que por sua vez ativarão os transistores de potência gerando torque para movimentar o rotor de acordo com o pwm gerado com base na posição do acelerador.
	
	
		\subsubsection{Síntese e Componentes do Subsistema de Acionamento}
		A demanda por potência é obtida através do acelerador e enviada ao driver do motor na forma modulada por largura de pulso, pulse width modulation (PWM), passando primeiramente por optoacopladores a fim de proteger o microcontrolador que ficará isolado eletricamente.
		
			\graphicspath{{figuras/}}
			\begin{figure}[h!]
				\centering
				\includegraphics[width=0.5\textwidth]{Figura_3_MOSFET.PNG}
				\caption{MOSFET Canal-N (Datasheet IRF540).}
				\label{img:MOSFET}
			\end{figure}
		
		O driver é formado por uma ponte trifásica, que são MOSFETs dispostos de maneira que realizem o correto acionamento das fases do motor a partir dos sinais de comando vindo dos optoacopladores.
		
			\graphicspath{{figuras/}}
			\begin{figure}[h!]
				\centering
				\includegraphics[scale=1.2]{Figura4_Ponte_Trifasica.PNG}
				\caption{Ponte trifásica.}
				\label{img:Ponte_Trifasica}
			\end{figure}
		
	\subsection{Etapa de Controle}
	Será utilizado para prototipagem o microcontrolador arduino. Onde ocorre todo o processamento dos dados vindos dos sensores, passando pelos algoritmos de controle e enviando as informações ao agrupamento de potência, que são os MOSFETs e ao display, para interface com o usuário. A placa de prototipagem Arduino UNO será utilizada apenas nas fases de testes. Depois de definidos os parâmetros corretos, será usado apenas o chip microcontrolador ATMEGA 328p e os componentes para o correto funcionamento.
		
			\graphicspath{{figuras/}}
			\begin{figure}[h!]
				\centering
				\includegraphics[width=0.5\textwidth]{Figura5_Arduino_Uno.PNG}
				\caption{Arduino UNO, placa R3}
				\label{img:Arduino_Uno}
			\end{figure}
		
	O componente principal desse subsistema é o microcontrolador ATMEGA328P cujas principais características são:
		
	\begin{itemize}
			\item  Alta velocidade de processamento: até 16 MHz de clock.
			\item Memória interna de 32 KB.
			\item 14 entradas/saídas digitais.
			\item 06 entradas analógicas.
			\item  06 saídas PWM (dentre as 14 digitais).
			\item 2 entradas para interrupções.
		\end{itemize}
	
  
 	\subsection{Sistema de Controle e Disponibilização dos Dados}
 		\subsubsection{Requisito}
 		Para garantir o bom funcionamento e a estabilidade do conjunto que compõe a bicicleta, é necessário criar um sistema que seja capaz de fornecer ao usuário informações gerais do estado do produto e que oriente o uso do mesmo. Na prática, isso implica em um painel que indica parâmetros como a velocidade exercida pelo veículo, o nível de carga das baterias, a orientação e a distância do percurso.
 		
 		\subsubsection{Interface Humano - Computador}
 		É necessária a visualização em tempo real dos dados processados pelo sistema. Porém, por se tratar de uma bicicleta, veículo de transporte que exige atenção do ciclista, deve-se optar por interfaces mais minimalistas e que possam ser facilmente compreendidas. Além disso, elas devem ser adaptáveis ao corpo da bicicleta, e terem tamanho reduzido, para melhor encaixe.
 		
 		No quesito velocidade de resposta, é necessário rapidez de processamento. No entanto, a quantidade e a latência da entrega de informação não podem ser tão dinâmicas a ponto de confundir ou exigir demais da atenção do ciclista. Em outras palavras,  o sistema deve estar constantemente funcional, porém seu contato com o usuário é apenas ocasional.
 		
 		\subsubsection{Síntese}
 		O sistema de controle e disponibilização dos dados projetado é controlado por um microcontrolador Atmel ATmega328 utilizado na placa Arduino Uno R3 (Figura 5) que dispõe portas digitais e portas Analogicas em número suficiente para todo nosso projeto, incluindo o sistema do acionamento do Motor. Para esse sistema o Microcontrolador citado receberá os dados dos sensores de velocidade e de carga de bateria ligados a roda da bicicleta e a bateria, respectivamente, e irá receber ainda através de um módulo Bluetooth Serial HC-06 (escravo) as ordens provindas do aplicativo e do GPS do celular, transformando tudo em um único sistema integrado e representado por dois displays OLED I2C acoplados na própria bicicleta, um mostrando os dados de velocidade e percentual de bateria e outro mostrando a rota. Os dados são filtrados, calibrados e estruturados através de Software programado na IDE (Integrated Development Environmente, ou Ambiente de Desenvolvimento Integrado, em português) do Arduino utilizando uma linguagem baseada em C/C++ visando garantir que os resultados apresentados aos usuários sejam o mais próximo possível da realidade.
 		Os requisitos de sensoriamento foram cumpridos utilizando-se de comunicação Bluetooth com o celular do ciclista, que já possui integrado GPS. Além disso, Dadas as portas analógicas do microcontrolador escolhido, a leitura de bateria e velocidade foram supridas. E para cumprir com os pré-requisitos de processamento, as várias tarefas do microcontrolador foram divididas em Managers ( do inglês, “gerentes”). Esses subgrupos de código são os responsáveis por administrar cada um dos fatores relevantes de seus domínios. A seguir uma descrição rápida de cada um deles. O diagrama a seguir é uma versão resumida do projeto.
 		\begin{itemize}
 			\item Battery Manager: Responsável pela leitura e estoque das informações de bateria.
 			\item Bluetooth Manager: Responsável pela comunicação bluetooth com outros dispositivos. Inclui um protocolo de comunicação.
 			\item Velocity Manager: Traduz os dados crus obtidos dos sensores para velocidade e os estoca.
 			\item TTGPS Manager: Responsável pelo Turn-By-Turn GPS. 
 		\end{itemize}
 	
 		\newpage
 			\graphicspath{{figuras/}}
 			\begin{figure}[H]
 				\centering
 				\includegraphics[width=0.9\textwidth]{Figura6_Diagrama_de_modulos_do_sistema.PNG}
 				\caption{Diagramas de blocos da integração dos módulos do sistemas}
 				\label{img:Diagrama_de_modulos_do_sistema}
 			\end{figure}
 		 		
		\subsubsection{Implementação}
		O projeto embarcado da UnBike foi pensado com o ideal de reunir todos os sub-blocos componentes em um único microcontrolador, capaz de informar ao usuário dados relevantes como direção do GPS, nível de bateria e velocidade. A seguir são explicados como cada um dos pré-requisitos foram cumpridos no decorrer do projeto.
		Para cumprir com os requisitos de  comunicação / Localização, foi escolhida a comunicação Bluetooth, ideal por ser de baixa potência e alcance reduzido. Assim, não afetará outros veículos próximos, da mesma forma que representará uma economia de bateria. 
		Os requisitos de Interface Humano - Computador foram supridos por dois monitores de OLED Modelo GM009605. Por seu tamanho reduzido, não representam grandes distrações para o ciclista, ao passo que possuem um grande contraste e são excelentes para a visualização contra a luz solar conforme a figura \ref{img:display_indicando_a_rota}. Também nesse tópico, foi escolhido o microcontrontrolador Arduino, por sua facilidade de codificação e também por sua versatilidade, apresentando dentre outros elementos , entradas analógicas, saídas PWM e comunicação I2C e serial. O modelo utilizado será o Arduino UNO visto na figura \ref{img:Arduino_Uno}.
		Para melhor entendimento e análise do sistema de Controle e disponibilização de dados o esquemático deste projeto é demonstrado abaixo:
		
			\graphicspath{{figuras/}}
			\begin{figure}[h!]
				\centering
				\includegraphics[width=0.7\textwidth]{Figura_7_sistema_de_controle.PNG}
				\caption{Esquemático Sistema de controle e disponibilização dos dados}
				\label{img:sistema_de_controle_e_disponibiização_de_dados}
			\end{figure}
			
		Observa-se que é possível dividir a função do sistema de controle em duas partes, onde a primeira trata exclusivamente dos sensores e a segunda se refere ao aplicativo.
	
		\subsubsection{Sensoriamento}
		Existem dois dados a serem coletados através de sensores no sistema, que é a velocidade da bicicleta e o nível de carga das baterias.
		Para o controle de velocidade será empregado um Reed Switch, que é um “sensor” simples composto por duas partes, um ímã e um SWITCh (chave)que é acionado pela aproximação do imã. O switch foi acoplado ao tirante traseiro da bicicleta e o ímã a roda traseira da bicicleta da seguinte forma:
			\graphicspath{{figuras/}}
			\begin{figure}[h!]
				\centering
				\includegraphics[width=0.5\textwidth]{Figura_8_montagem_do_sensor_velocidade.PNG}
				\caption{Montagem do Sensor de Velocidade}
				\label{img:montagem_do_sensor_velocidade}
			\end{figure}
		Desta forma toda vez que o ímã passar pelo Switch, o sistema será capaz de enviar sinais com frequências que variam de acordo com a pedalada do usuário. Uma vez que se tenha o dado da frequência é possível processar a velocidade linear instantânea do veículo, que é geralmente dada por v = 2.pi.f.R, onde R é o raio da roda da bicicleta.
		
		Onde: 
		\begin{itemize}
			\item E = F.e.m. gerada na armadura (Volts)
			\item p = Número de pólos
			\item T = Fluxo magnético por pólo (Maxwell)
			\item Z = Número de condutores na armadura
			\item m = Número de percursos na armadura entre os terminais
			\item N = Velocidade (RPM))
		\end{itemize}

		Abaixo está disposto o código Arduino de uso do REED SWITCH de maneira simplificada, nele é possível testar quando o ímã da roda se move após o a chave, o arduino deve imprimir 1023, caso contrário ele imprimirá 0.
		
		\#define reed A0//pin connected to read switch
		
		//storage variable\\
		\indent int reedVal;
		
		void setup()\{\\
			\indent \indent Serial.begin(9600);\\
		\indent\}
		
		
		void loop()\{\\
			\indent \indent reedVal = analogRead(reed);//get val of A0\\
			\indent \indent Serial.println(reedVal);\\
			\indent \indent delay(10);\\
		\indent \}
	
			\graphicspath{{figuras/}}
			\begin{figure}[H]
				\centering
				\includegraphics[width=0.5\textwidth]{Figura_9_sensor_velocidade.PNG}
				\caption{Teste do Sensor de Velocidade}
				\label{img:teste_do_sensor_velocidade}
			\end{figure}
			
		O nível de carga das baterias é um dos pontos mais importantes do produto, por isso o seu controle é fundamental para garantir o funcionamento correto dos motores e do painel. Para aferir esse dado, deve-se entender que a variação de carga em uma bateria interfere em uma variação de tensão e, através de um circuito retificador de tensão, podemos saber em que nível o controle de carga se encontra. Existem diversos modelos que podem ser utilizados nesse projeto, o que vai mudar é a precisão das medidas de acordo com os componentes que serão encontrados e utilizados no circuito.
		Neste Projeto faremos uso de um conjunto de transistors e diodos para acionar alguns LED's quando uma determinada tensão for alcançada, além de um conversor AD para definir algumas faixas de carga a serem apresentadas ao usuário. O espaço físico que poderá ser utilizado e a necessidade da precisão do sistema irão definir qual topologia será utilizada.
			

	\subsection{Processamento dos Dados do Aplicativo}
	O aplicativo que integrará o usuário ao sistema será capaz de coletar o caminho que o usuário quer percorrer e, através do GPS do celular, traçar uma rota a ser seguida. Essa rota será constantemente informada ao microprocessador que, através de algum dispositivo, deve orientar o usuário sobre o caminho que ele deve percorrer. Dois parâmetros serão levados em consideração: direção e distância.

	O indicador de direção será baseado no modelo clássico de um GPS que contém oito sinais ilustrativos:

	\graphicspath{{figuras/}}
	\begin{figure}[h!]
		\centering
		\includegraphics[scale=0.80]{Figura_10_Integracao_com_o_aplicativo.PNG}
		\caption{Integração com o Aplicativo}
		\label{img:Integracao_com_o_aplicativo}
	\end{figure}
	
	Cada desenho desse será nomeado com uma palavra de 3 bits, e desenhado com uma estrutura binária de matriz dentro do código. Uma vez que o GPS determinar alguma dessas 8 direções o aplicativo irá dar um comando ao microprocessador, através da palavra de 3 bits, para que o desenho correto de direção seja acionado e apresentado no display. 
	Para o melhor entendimento, atribui-se por exemplo a palavra 010 à direção "SIGA EM FRENTE". Quando o GPS indicar essa direção, o aplicativo enviará ao microprocessador os níveis de tensão "0", "1" e "0" para o micro, que irá processar a devida imagem no display.
	
		\graphicspath{{figuras/}}
		\begin{figure}[h!]
			\centering
			\includegraphics[scale=0.80]{Figura11_display_indicando_a_rota.PNG}
			\caption{Display indicando a rota}
			\label{img:display_indicando_a_rota}
		\end{figure}



	O envio desses comandos poderá ser feito da forma mais simples, utilizando 3 pinos lógicos de entrada do microprocessador, ou através de uma mensagem serial, que deixa o código mais robusto mas compensa com a economia dos pinos de entrada do sistema.
	
	Para cada direção do GPS nota-se que existe um indicador de distância até que se alcance tal direção. No caso da bicicleta, tais avisos começam a aparecer a partir de uma distância de 50m do ponto em questão. Baseado nisso, o aplicativo também será capaz de enviar essas informações de distância ao microprocessador, que por sua vez irá indicar esses dados ao usuário através do display e de um sinal luminoso.
	Uma lâmpada será colocada no painel da bicicleta e, a partir do momento que o GPS indicar informações de distância, ela começará a piscar, aumentando a sua frequência conforme se aproxima do destino. A idéia é que, embora o usuário tenha todas essas informações no display do painel, a sua atenção esteja voltada ao percurso na maior parte do tempo.
	

		\subsubsection{Integração com Sistema de Controle}
		Uma vez que o sistema coletou os dados provindos da bicicleta e do aplicativo, será possível processar essas informações e alimentar o painel do usuário.


	\subsection{Diagrama e Montagem dos Circuitos}
	Os circuitos e esquemáticos serão feitos nos simuladores Proteus e LTspice, divididos de acordo com seus subsistemas. Os circuitos serão mostrados sem os resistores para facilitar a visualização.
		
	\begin{table}[H]
		\caption{Nomenclatura de acordo com a cor dos fios.}
		\centering
		\label{Nomenclatura_de_acordo_com_a_cor_dos_fios}
		\begin{tabular}{ccc}
			\cline{2-3} & Sensores Hall & Fases \\ \hline
			Azul & X & A \\ \hline
			Verde & Y & B \\ \hline
			Amarelo & Z & C \\ \hline
		\end{tabular}
	\end{table}
	
	\begin{comment}
		\graphicspath{{figuras/}}
		\begin{figure}[h!]
			\centering
			\includegraphics[scale=0.80]{Tabela_1_cor_dos_fios.png}
			\caption{Nomenclatura de acordo com a cor dos fios.}
			\label{img:Nomenclatura_de_acordo_com_a_cor_dos_fios}
		\end{figure}
	\end{comment}
	
		\subsubsection{Circuito Optoacoplador e Driver}
		
			\graphicspath{{figuras/}}
			\begin{figure}[h!]
				\centering
				\includegraphics[scale=1.4]{Figura12_circuito_optoacoplador_e_driver.PNG}
				\caption{Diagrama de circuito optoacoplador e driver.}
				\label{img:Diagrama_do_circuito_optoacoplador_e_driver}
			\end{figure}
		
		%\newpage
		
		\begin{table}[!htb]
			\caption{Ordem de chaveamento para cada fase do motor de acordo com a posição obtida pelos sensores Hall.}
			\centering
			\label{Ordem_de_chaveamento_para_cada_fase_do_motor_de_acordo_com_a_posição_obtida_pelos_sensores_Hall}
			\begin{tabular}{ccc}
				\multirow{2}{*}{\textbf{Sensores Hall (X/Y/Z)}} & \multicolumn{2}{c}{Transistores que devem ser ativados:} \\
				& PWM & Retorno \\ \hline
				0/0/1 & C & B \\ \hline
				0/1/1 & C & A \\ \hline
				0/1/0 & B & A \\ \hline
				1/1/0 & B & C \\ \hline
				1/0/0 & A & C \\ \hline
				1/0/1 & A & B \\ \hline
			\end{tabular}
		\end{table}
		
		\begin{comment}
			\graphicspath{{figuras/}}
			\begin{figure}[h!]
				\centering
				\includegraphics[scale=0.80]{Tabela2_Ordem_de_chaveamento_Hall.png}
				\caption{Ordem de chaveamento para cada fase do motor de acordo com a posição obtida pelos sensores Hall.}
				\label{img:Ordem_de_chaveamento_para_cada_fase_do_motor_de_acordo_com_a_posição_obtida_pelos_sensores_Hall}
			\end{figure}
		\end{comment}
			
		\subsubsection{Circuito de Controle e Sensores}
		
			\graphicspath{{figuras/}}
			\begin{figure}[H]
				\centering
				\includegraphics[scale=1.4]{Figura13_circuito_de_obtencao_de_dados.PNG}
				\caption{Diagrama do circuito de obtenção de dados.}
				\label{img:Diagrama_do_circuito_de_obtencao_de_dados}
			\end{figure}	
		

  \section{Alimentação}
  A bicicleta elétrica utilizará dois sistemas de alimentação, que serão:
  \begin{itemize}
  	\item Banco de baterias para alimentar o motor elétrico;
  	\item Dínamo para carregar uma bateria que alimentará os componentes eletrônicos e todo o sistema de iluminação do GPS. 
  \end{itemize}
  
	O sistema de navegação será alimentado por um sistema separado do motor elétrico como forma de garantia de suprimento de energia para esse sistema. Caso a bateria descarregue no meio do percurso, o dínamo será capaz de carregá-la enquanto o ciclista pedala a bicicleta, garantindo que o mesmo continuará com o sistema de iluminação que lhe indicará a rota desejada.
	
	\subsection{Motor Elétrico}
	De modo geral, pode-se dizer que um motor elétrico é qualquer aparelho ou equipamento que permita transformar energia elétrica em mecânica. Em termos práticos, é amplamente utilizado para diversos fins devido a características que lhe conferem vantagens em relação a outros motores, sendo interessante destacar: o custo baixo da energia que utiliza o fácil transporte devido à massa relativamente baixa que possui, além da versatilidade de adaptar-se a diversos tipos de cargas com características distintas.

	Os motores elétricos podem ser divididos em dois grandes grupos, baseados no tipo de corrente que utilizarão em seu processo de transformação de energia: os de corrente contínua (CC) e os de corrente alternada (CA). Na figura \ref{img:tipos_motores}, os diversos tipos de motores elétricos são apresentados para fins de curiosidade e entendimento geral da quantidade de motores possíveis que existem no mercado.	

\graphicspath{{figuras/}}
\begin{figure}[H]
\centering
\includegraphics[width=\textwidth]{tipos_motores.png}
\caption{Tipos de Motores Elétricos}
\label{img:tipos_motores}
\end{figure}

Apesar da grande variedade de motores, eles possuem características específicas que se adequam melhor a cenários distintos de uso, mesmo que em certos casos possam ser intercambiáveis nos processos, de acordo com as necessidades que a utilização exigirá. Baseando-se nisso, os motores de corrente contínua, os de indução, excitação por imas permanentes e relutância, são os mais utilizados para o uso em bicicletas elétricas.

Os motores elétricos possuem funcionamento baseado na troca de polaridade periódica entre os elementos magnéticos internos, permitindo assim que um rotor possa girar entre dois ímãs e gerar o movimento. Entretanto, a corrente contínua usada em motores CC é interessante para polos permanentes, fazendo com que seja necessária uma inversão do sentido da corrente a cada vez que os polos do rotor se encontrem com os dos ímãs. Para produzir esse efeito, geralmente usam-se comutadores, que são basicamente placas que envolvem o rotor, associada a outro elemento, chamado de escova, assim quando a corrente “entra” no sistema, ela tem seu caminho passando pela escova, parede do comutador, rotor, parede do outro comutador e a outra escova, onde ela inverte a polaridade, voltando para a fonte. 
 
 Considerando quanto ao uso ou não das escovas para o processo explicitado, os motores de corrente contínua podem ser divididos em dois subgrupos: com escovas e sem escovas. Aqueles que possuem as escovas tem seu funcionamento como já citado, já aqueles que não possuem ainda mantem o mesmo modo de obtenção do movimento do motor a partir da posição, entretanto, realizam a comutação eletronicamente, por meio de sensores que indicam o posicionamento instantâneo do motor. 

No caso apresentado neste relatório, o motor, já cedido anteriormente e que será aproveitado nesse projeto, é um motor de corrente contínua sem escovas. Na tabela \ref{esp_motor} são apresentados alguns poucos dados apresentados pelo vendedor do motor em relação a características do mesmo. Os demais dados não foram oferecidos pelo site mesmo após tentativa de contato, tornando escassos os dados. Além da tabela, na figura \ref{img:motor} têm-se uma imagem do motor.

\begin{table}[h!]
\centering
\caption{Especificações do Motor}
\label{esp_motor}
\begin{tabular}{|l|}
\hline
Especificações Motor Wind Bikes \\ \hline
Tração: Traseira                \\ \hline
Massa: 5,710 kg                 \\ \hline
Sistema de 120 graus            \\ \hline
\end{tabular}
\end{table}

\graphicspath{{figuras/}}
\begin{figure}[h!]
\centering
\includegraphics[scale=0.80]{motor.png}
\caption{Motor \textit{Wind Bikes}}
\label{img:motor}
\end{figure}
	
	\subsection{Dínamo}
	Apesar de nesse projeto definirmos o conceito de dínamo, a aplicação do mesmo nao existirá, haja visto a exigência dos professores da disciplina que o projeto conseguisse fazer com que o motor elétrico em si conseguisse atuar como gerador e basicamente fizesse a função que o dínamo teria, de maneira mais eficiente e exigindo um grau maior de conhecimento para a realização. Assim, esse tópico está no relatório apenas para fins de demonstração do aperfeiçoamento do projeto e registro das ideias iniciais. 

  
\subsection{Bateria}
	Inicialmente, o cálculo da capacidade da bateria forneceu uma estimativa de qual seria a autonomia dimensionada para todo o sistema. Entretanto, posteriormente, a questão de manter uma autonomia maior foi posta de lado em prol dos custos e do fato de que nesse projeto integrador o objetivo principal é o de funcionamento e integração dos sistemas, não necessariamente de toda a usabilidade completa e já comercial para o usuário, permitindo assim que uma autonomia menor pudesse ser adotada para conter parte dos custos, visto que um conjunto de baterias de 12V de tensão e 10ah de capacidade nominal em um ensaio C1 ou C5 teriam um custo quatro vezes maior quando comparada a baterias comerciais mais simples, ainda de 12V de tensão, porém com apenas 7Ah de capacidade nominal em teste C20. Os ensaios e as nomenclaturas CX referem-se aos testes feitos com as baterias pelas próprias empresas para verificar o quanto de corrente a bateria consegue descarregar ao longo do tempo, onde C1 é uma hora, C5 seriam cinco horas e C20, vinte horas. Assim, uma bateria de 10Ah C1, consegue descarregar 10A em uma hora. Já a bateria escolhida, de 7Ah C20, consegue apenas 7A em vinte horas.
	
	As baterias escolhidas pelo grupo foram três do modelo 12MVA-7 Nobreak da Moura, uma bateria usada para aplicações como cercas elétricas, portões elétricos e também em algum grau para bicicletas elétricas e outras aplicações mais simples. A imagem \ref{img:bateria_moura} apresenta uma foto da bateria, enquanto a imagem \ref{img:esp_bateria} traz especificações desta retiradas do catálogo da Moura. 
	
	\graphicspath{{figuras/}}
	\begin{figure}[h!]
	\centering
	\includegraphics[scale=0.50]{bateria_bike}
	\caption{Foto da Bateria Moura 12MVA-7 Nobreak}
	\label{img:bateria_moura}
	\end{figure}
	
	\graphicspath{{figuras/}}
	\begin{figure}[h!]
	\centering
	\includegraphics[scale=0.50]{especificacao_bateria}
	\caption{Especificações Bateria 12MVA-7}
	\label{img:esp_bateria}
	\end{figure}


Como as especificações apresentam, as baterias serão capazes de suprir a demanda de corrente do sistema e dos componentes eletrônicos, visto que agora não haverá mais outra bateria para suprir somente os componentes menores, exigindo que apenas o banco de três de baterias alimente todo o conjunto, motor e equipamentos eletrônicos. Como dito anteriormente, a autonomia não foi considerada um requisito, mas é seguro afirmar que ela será inferior a uma hora, o tempo proposto inicialmente.

\subsubsection{Circuito de Carregamento da Bateria}
Um carregador, como o nome já dá uma ideia, é basicamente um dispositivo capaz de recarregar outro componente específico, nesse caso, as baterias. Como as baterias de chumbo-ácido possuem alguns critérios básicos para que não afetem a qualidade da bateria, tornando sua vida útil menor. Um deles é a necessidade de o carregamento ser feito com as baterias ligadas em paralelo entre elas, além de ser interessante para a preservação dela que a corrente de carregamento não ultrapasse 10\% da capacidade nominal que a bateria possui. No caso específico da nossa bateria, de capacidade 7Ah, essa corrente seria 0,7 A.
   
    Apesar desses dois critérios, nesse projeto, deixamos o carregamento das baterias em paralelo em segundo plano, devido ao fato de que desejamos que elas fossem possíveis de serem carregadas como um conjunto, estando em uma estrutura só ao mesmo tempo, sem a necessidade de serem retiradas da bicicleta uma a uma, ou mesmo de se alterar drasticamente a maneira como está conectada uma com a outra e juntas ao sistema. A melhor forma para se manter a configuração original delas quando estando na bicicleta e fora dela é carregando-as em série, permitindo que o usuário carregue elas de maneira mais confortável e sem ter capacidade de comprometer as baterias, mantendo a vida útil de cada uma delas no nível desejado.
	
	O outro critério, o carregamento das baterias a 10\% da capacidade nominal, foi levado em conta, mantendo assim uma qualidade no carregamento. Dessa forma, a corrente mínima de recarga foi selecionada como sendo esses 10\% (0,7 A, como já citado) e a corrente máxima de recarga é a própria corrente máxima selecionada pelo fabricante, no caso desse projeto, 2,1 A, apresentado em (x+1).	
A partir disso, com uma fórmula bem simples, é possível estimar o tempo de carregamento total da bateria:

\begin{equation}
Tr = C/i
\end{equation}

Onde TR seria o tempo de recarga, C a capacidade nominal e i a corrente.

Em um cálculo rápido é possível observar que o tempo de recarga das baterias seria de aproximadamente 9 a 10 horas.

Um primeiro circuito foi proposto para o Ponto de Controle 2, entretanto, devido a escolha pelo carregamento em série, um novo circuito foi idealizado, ainda entretanto, levando-se em consideração a forma ideal de carregamento de uma bateria de chumbo-ácido. Como o circuito foi criado especificamente para as necessidades desse projeto, não houve necessidade de se adaptar algo já pronto em algum repositório, seja ele físico ou virtual.

Essa forma ideal de carregamento, citada anteriormente, consiste em três “fases” de carregamento: uma fase de recarga, onde se eleva a tensão da bateria até 13,8 V, seguida de uma fase de equalização, onde as células das baterias atingem a tensão limite e por fim uma fase de flutuação, onde a tensão é reduzida para a faixa de flutuação da bateria, geralmente 13,2 a 13,8 V, em baixa corrente. Na figura \ref{estagio_carregamento} é apresentado as três etapas de carregamento tidas como ideais.

\graphicspath{{figuras/}}
\begin{figure}[h]
\centering
\includegraphics[scale=0.50]{estagio_carregamento}
\caption{Estágios de Carregamento Bateria Chumbo-Ácido}
\label{estagio_carregamento}
\end{figure}

A partir da análise dos estágios ideais de carregamento das baterias, e considerando que elas devem ser carregadas em série, é possível aferir qual seria a tensão máxima de carregamento de todo o conjunto, basicamente, três vezes o valor de carregamento de uma só. Assim, consideramos para esse projeto que 42 V seriam suficientes e respeitariam as fases descritas, visto que a variação da tensão durante estas fica entre 13,2 e 14,6 V.

O circuito é formado por um Transformador de 48 V (24 V + 24 V) e 1,5 A, que irá limitar a tensão residencial (definida como 220 V) para esses 48 V, posteriormente passando por uma Ponte Retificadora que irá transformar a corrente alternada em uma corrente contínua pulsante, posteriormente seguindo para o capacitor que termina de “linearizar” essa corrente pulsante, ao diminuir o ripple (o “tamanho” do pulso). Apenas esse processo já seria suficiente para tornar a corrente própria para carregar as baterias, entretanto, a tensão ainda estaria alta, um pouco acima dos 48 V devido a ponte retificadora aumentar ligeiramente esta. Para resolver esse problema, foram usados os reguladores de tensão LM317T associados com resistores, permitindo assim que a saída do circuito fornecesse os 42 V requeridos pelas baterias. O resistor 6 foi utilizado apenas para fins de simular uma carga, não fazendo parte do sistema propriamente dito.

Todo o esquemático do circuito utilizado é apresentado na figura \ref{referencia}. Para sua criação e posterior simulação, foi utilizado o software Qucs, um software livre e gratuito, que apesar de mais limitado e visualmente mais pobre, quando comparado a concorrentes mais tradicionais do mercado, como o Proteus, tem um desempenho eficiente dentro da proposta e consegue atender o nosso projeto de forma satisfatória.

\graphicspath{{figuras/}}
\begin{figure}[h]
\centering
\includegraphics[scale=0.40]{referencia}
\caption{Circuito de Carregamento de Referência}
\label{referencia}
\end{figure}
 
A simulação realizada consistiu basicamente na medição da corrente e tensão teórica fornecida pelo sistema através do software, para aferir se o circuito idealizado conseguiria atender nossas necessidades. Essa simulação é apresentada na figura \ref{simulacao}. De maneira geral ela é semelhante à imagem do próprio circuito, com a adição de um voltímetro e um amperímetro.

\graphicspath{{figuras/}}
\begin{figure}[h]
\centering
\includegraphics[scale=0.40]{simulacao}
\caption{Simulação do Circuito}
\label{simulacao}
\end{figure}

Os resultados apresentados deixam claro que o circuito conseguiria suprir as necessidades propostas, visto que consegue fornecer os 42 V desejados, além de também mostrar que a relacao de transformacao escolhida é de fato apropriada para o nosso circuito, permitindo assim que o transformador comprovado fosse ideal para o projeto. 

Com o término dos testes, a produção se deu logo de imediato, sendo então utilizados os seguintes equipamentos:

\begin{itemize}
\item Transformador Redutor 24 V + 24 V / 1.5 A;
\item 2 resistores de 270 Ohm;
\item 1 resistor de 4.7kOhm;
\item 1 resistor de 560 Ohm;
\item Trimpot de 5k; 
\item 2 reguladores de tensão LM317T;
\item Ponte Retificadora;
\item Capacitor de 3300 uF.
\end{itemize}

<<<<<<< Updated upstream
\graphicspath{{figuras/}}
\begin{figure}[h]
\centering
\includegraphics[scale=0.30]{placa_confeccionada}
\caption{Placa confeccionada para Circuito Carregador das Baterias}
\label{placa}
\end{figure}

\subsection{Frenagem Regenarativa}
A frenagem regenerativa consiste em recuperar a energia gerada durante a pedalada. A energia cinética da bicicleta aplica energia mecânica no eixo do motor, forçando este a entrar no modo de geração. Essa recuperação da energia implica na devolução o banco de baterias. 
=======
	\begin{figure}[H]
		\centering
		\includegraphics[scale=0.3, angle=90]{bateria_bike.jpeg}
		\caption{Foto da Bateria Moura 12MVA-7 Nobreak}
		\label{img:bateriabike}
	\end{figure}
	
	\begin{figure}[!htb]
		\centering
		\includegraphics[scale=0.5]{especificacao_bateria.jpeg}
		\caption{Especificações Bateria 12MVA-7}
		\label{img:especificacaobateria}
	\end{figure}
	
Como as especificações apresentam, as baterias serão capazes de suprir a demanda de corrente do sistema e dos componentes eletrônicos, visto que agora não haverá mais outra bateria para suprir somente os componentes menores, exigindo que apenas o banco de três de baterias alimente todo o conjunto, motor e equipamentos eletrônicos. Como dito anteriormente, a autonomia não foi considerada um requisito, mas é seguro afirmar que ela será inferior a uma hora, o tempo proposto inicialmente.
>>>>>>> Stashed changes

O circuito destinado ao acionamento do motor demanda uma corrente da bateria que é aplicada no motor através do sistema de chaveamento dos MOSFETs, que por sua vez, necessitam trabalhar com um tempo de chaveamento adequado. Contudo quando se aplica um torque mecânico no motor esse mesmo circuito é capaz de realizar o trabalho inverso de modo que a energia gerada pelo motor possa ser injetada nas baterias, ou seja o mesmo circuito, porém agora com a corrente no sentido oposto.

Para que ocorra efetivamente a recarga das baterias a tensão gerada pelo motor precisa ser superior a tensão das baterias, 36V. Essa tensão gerada sobe conforme o aumento da velocidade de rotação do motor, logo conclui-se que a partir de certa velocidade estará sendo aplicada uma tensão superior a 36V e as baterias estarão sendo recarregadas.

Foram feitos testes na bicicleta utilizando um medidor de velocidade e um multímetro e foi aferido que quando a bicicleta atinge uma velocidade entre a faixa de 40 e 45Km/h a tensão aplicada nas baterias já ultrapassa 36V e as baterias são recarregadas. Velocidades acima dessa faixa também recarregam o banco de baterias. Essa velocidade é o nosso “limiar de velocidade”, ou seja, o momento onde nosso motor deixa o estado de motor em si, para atuar como gerador.

<<<<<<< Updated upstream
\subsection{Plano de Integração}
A Alimentação se integra basicamente junto ao sistema de Eletroeletrônica ao alimentar o motor e também os componentes do sistema. Toda essa ligação é realizada pela placa de acionamento, pois através dela ocorrerá não só o acionamento do motor em si, como também a regeneração das próprias baterias através do processo de frenagem regenerativa. A tensão para alimentar o circuito eletrônico relacionado ao módulo bluetooth também será fornecido pela placa de acionamento. Dessa forma, através do diagrama abaixo é possível visualizar a integração entre o sistema de energia e os demais. 

\graphicspath{{figuras/}}
\begin{figure}[h!]
\centering
\includegraphics[scale=0.50]{integracao_alimentacao}
\caption{Plano de Integração}
\label{plano_integracao}
\end{figure}

\subsection{Avaliação Crítica}
	Como Ponto de Controle final, é necessária fazer uma Avaliação Crítica de todos os avanços, problemas e questões que o subgrupo de Alimentação possuiu ou enfrentou ao longo de todo o projeto. 
	
	Em um aspecto inicial, o grupo teve um início tranquilo, conseguindo facilmente dimensionar as baterias e adequar elas às necessidades iniciais desejadas pelo subgrupo de Estrutura, ao necessitar de uma menor massa, e também a questão de que não haveria necessidade de uma autonomia muito alta. A partir daí houveram alguns problemas em relação a encontrar uma solução concreta para o desafio de regenerar energia através do motor. Além disso, o grupo acabou sendo desfalcado ao longo do projeto, visto que um dos componentes acabou trancando o semestre na universidade, retirando-se da disciplina. 
	
	Apesar desses dois desafios, o grupo conseguiu se redistribuir em termos de tarefas e encontrar um norte para solucionar o problema da regeneração, além de definir especificamente como seria feito o carregamento tradicional, junto a energia elétrica residencial. Dessa forma, é válido e importante dizer que o subgrupo alcançou seu objetivo e conseguiu realizar as tarefas propostas dentro dos novos requisitos que foram sendo alterados e ajustados ao longo do avanço do projeto e das possibilidades do mesmo. 
=======
	\begin{figure}[H]
		\centering
		\includegraphics[scale=0.4]{estagio_carregamento.jpeg}
		\caption{Estágios de Carregamento Bateria Chumbo-Ácido}
		\label{img:estagiocarregamento}
	\end{figure}
>>>>>>> Stashed changes


  \section{Estrutura}
  Este projeto visa a construção de uma bicicleta elétrica capaz de seguir uma rota pré-determinada via gps. Porém, há a necessidade de se projetar com a devida atenção toda a estrutura da bicicleta de modo que os demais componentes sejam devidamente adaptados de forma ergonômica, em outras palavras, maximizar a segurança e eficiência da interação máquina e ser humano.
Foram levados em consideração vários fatores, como o material, a estabilidade, conforto e custo-benefício para a escolha e dimensionamento da estrutura.O quadro da bicicleta guardará os motores, baterias e demais componentes eletroeletrônicos de forma segura e organizada. Haverá também, um painel bastante intuitivo que auxiliará o usuário em sua rota como: indicação da bateria restante, distância percorrida e distância restante.
	\subsection{Projeto Preliminar}
		\subsubsection{Materiais}
		Dentre os materiais que compõem o quadro da bicicleta, foi se escolhido o alumínio, por se tratar de um material leve, barato, com ponto de fusão suficientemente seguro para ser integrado com os componentes eletroeletrônicos além da pouca oxidação sofrida. Outros materiais que foram pesquisados com a finalidade de implementação, foram o aço, porém possui um peso elevado se comparado ao alumínio, e está sujeito a oxidação, apesar do baixo preço. Fibra de carbono, possui um baixo peso, porém um alto custo e uma grande dificuldade na parte de manutenção e conserto.
		
		\subsubsection{Ergonomia}
		Atualmente no mercado brasileiro as bicicletas mais vendidas são as Mountain Bike, comumente apelidadas de MTB. Isso se deve a sua versatilidade que permite ser utilizada em qualquer terreno. Elas geralmente são encontradas nos tamanho de quadro 17, 18 e 19”. Os dois primeiros tipos são indicados para pessoas entre 1,68 e 1,78 metros de altura enquanto a última atende a faixa de 1,78 e 1,85 metros. 
		Segundo a pesquisa de orçamentos familiares realizada pelo IBGE entre 2008 e 2009, a estatura média da mulher e do homem brasileiro adulto são, respectivamente, 1,71 e 1,60 metros. Associando esse dado com os tamanhos de quadros mais comuns do mercado optou-se por utilizar como base para o projeto um quadro de 17”.  
		As análises ergonômicas serão realizadas com o auxílio do software CATIA V5 utilizando sua base de dados referente ao estudo de percentil do norte americano. Para o problema apresentado serão adotadas as medidas dos homens de percentil entre 13 e 65, e para mulheres entre 79 e 99, ambos norte americanos.

		\subsubsection{Design}
	
		O \textit{design} da bicicleta é apresentado na figura \ref{img:dimensoes}, onde é possível ver as dimensões da bicicleta a ser produzida.	
		
			\graphicspath{{figuras/}}
			\begin{figure}[h!]
			\centering
			\includegraphics[scale=0.80]{dimensoes.png}
			\caption{Dimensões}
			\label{img:dimensoes}
			\end{figure}

	\subsubsection{Estabilidade}
	O centro de massa da bicicleta sem os componentes se concentrou em 0,6m no eixo x e 0,5m no eixo y, as forças normais nos pneus traseiros e dianteiros foram de,respectivamente: 24,525N e 73,575N, enquanto as forças de fricção(atrito)  nos pneus traseiros e dianteiros de, respectivamente: 14,96N e 44,88N. As figuras \ref{img:esq_forca_sem_frenagem}, \ref{img:esq_forca_com_frenagem_suave} e \ref{img:esq_forca_com_frenagem_brusca} apresentam três esquemáticos demonstrando a aplicação da força sobre a bicicleta em três momentos distintos.

		\graphicspath{{figuras/}}
		\begin{figure}[H]
		\centering
		\includegraphics[scale=0.80]{esq_forca_sem_frenagem.png}
		\caption{Esquemático de força sem frenagem}
		\label{img:esq_forca_sem_frenagem}
		\end{figure}

		\graphicspath{{figuras/}}
		\begin{figure}[h!]
		\centering
		\includegraphics[scale=0.80]{esq_forca_com_frenagem_suave.png}
		\caption{Esquemático de força com frenagem suave}
		\label{img:esq_forca_com_frenagem_suave}
		\end{figure}
		
		\graphicspath{{figuras/}}
		\begin{figure}[H]
		\centering
		\includegraphics[scale=0.80]{esq_forca_com_frenagem_brusca.png}
		\caption{Esquemático de forca com frenagem brusca}
		\label{img:esq_forca_com_frenagem_brusca}
		\end{figure}


	\subsubsection{Análises}
	Foram feitas algumas análises em um quadro de 17 com ajuda dos softwares CATIA v5 e Ansys R17.0 no intuito de levantar questões sobre requisitos e melhorias que deverão estar presentes na estrutura.
	
	\subsubsection{Estática}
	As figuras \ref{img:deformacao_total}, \ref{img:equivalente_de_von_mises}, \ref{img:modo_de_vibracao}, \ref{img:modo_de_vibracao2}, \ref{img:modo_de_vibracao3}, \ref{img:modo_de_vibracao4}, \ref{img:modo_de_vibracao5} e \ref{img:modo_de_vibracao 6} apresentam alguns graus de deformação à qual a bicicleta pode ser submetida. 	
	
		\graphicspath{{figuras/}}
			\begin{figure}[h!]
			\centering
			\includegraphics[width=0.7\textwidth]{deformacao_total.png}
			\caption{Deformacao total}
			\label{img:deformacao_total}
			\end{figure}	
			
		\graphicspath{{figuras/}}
			\begin{figure}[h!]
			\centering
			\includegraphics[width=0.7\textwidth]{equivalente_de_von_mises.png}
			\caption{Equivalente de von-Mises}
			\label{img:equivalente_de_von_mises}
			\end{figure}	
			
		\graphicspath{{figuras/}}
			\begin{figure}[h!]
			\centering
			\includegraphics[width=0.7\textwidth]{modo_de_vibracao.png}
			\caption{Modo de vibração 1}
			\label{img:modo_de_vibracao}
			\end{figure}	
			
		\graphicspath{{figuras/}}
			\begin{figure}[h!]
			\centering
			\includegraphics[width=0.7\textwidth]{modo_de_vibracao_2.png}
			\caption{Modo de vibracao 2}
			\label{img:modo_de_vibracao2}
			\end{figure}	
			
		\graphicspath{{figuras/}}
			\begin{figure}[h!]
			\centering
			\includegraphics[width=0.7\textwidth]{modo_de_vibracao_3.png}
			\caption{Modo de vibração 3}
			\label{img:modo_de_vibracao3}
			\end{figure}	
			
		\graphicspath{{figuras/}}
			\begin{figure}[h!]
			\centering
			\includegraphics[width=0.7\textwidth]{modo_de_vibracao_4.png}
			\caption{Modo de vibração 4}
			\label{img:modo_de_vibracao4}
			\end{figure}	
			
		\graphicspath{{figuras/}}
			\begin{figure}[h!]
			\centering
			\includegraphics[width=0.7\textwidth]{modo_de_vibracao_5.png}
			\caption{Modo de vibração 5}
			\label{img:modo_de_vibracao5}
			\end{figure}	
		
		\graphicspath{{figuras/}}
			\begin{figure}[h!]
			\centering
			\includegraphics[width=0.7\textwidth]{modo_de_vibracao_6.png}
			\caption{Modo de vibração 6}
			\label{img:modo_de_vibracao 6}
			\end{figure}	

\clearpage

	
	
	
	\subsubsection{Desafios Técnicos}
	Desafio: Definir uma geometria que comporte todo o sistema sem afetar a ergonomia do ciclista, e que seja capaz de suportar todas as solicitações mecânicas
	Alternativa de solução: Alterar a geometria e/ou alterar o material da estrutura.

	Desafio: impossibilidade de fabricação do quadro  por escassez de recursos, tempo ou incapacidade técnica.

	Alternativa de solução: adquirir um quadro comum no comércio e realizar as adaptações necessárias.

	\subsection{Atualizações}
	A princípio o objetivo era a construção completa da estrutura do quadro da bicicleta, porém a fabricação de um quadro se mostrou inviável, tanto pelo custo quanto pela falta de mão de obra necessária para a criação do protótipo. Desta forma procurou-se viabilizar o projeto a partir de modificações estruturais em uma bicicleta comum. 
	Para o motor elétrico foi necessário uma roda aro 29”. Assim foi iniciada uma procura por um quadro de 29”, inicialmente procurou-se por quadros e bicicletas novas, visto que o custo era bastante elevado, foi ampliada a busca por quadros e bicicletas completas usadas. Chegou-se à conclusão de que uma bicicleta completa usada reduziria os custos, dado que não seria necessária a compra de todos os materiais que compõem a bicicleta. 
	Como no primeiro ponto de controle foi proposto que o material da bicicleta seria alumínio, mantivemos essa diretriz na busca. Encontrada a bicicleta, partimos para o projeto de quais adaptações seriam necessárias para assegurar que a estrutura suportaria todas as necessidades do projeto.
	
	A bicicleta escolhida foi uma modelo M7 da marca GTMAX já equipada com os seguintes componentes:
	\begin{itemize}
		\item Aro: Aero 29 Alumínio Vnezi Vzan
		\item Cubo dianteiro/traseiro: 36F em alumínio com blocagem preto
		\item Raio: 290 x 2,0 zincado
		\item Câmara de Ar: 29 importado
		\item Pneu: 29 x 1,95 de cravo preto
		\item Selim: MTB preto Cairu
		\item Canote: Selim em alumínio com blocagem preta
		\item Pedal:9/16 Mtb em alumínio
		\item Abraçadeira de alumínio com blocagem preta
		\item Movimento central com rolamento Shunfeng
		\item Movimento de direção ahead set Neco preto
		\item Pedivela com engrenagem tripla de alumínio preto
		\item Alavanca Eze Fire EF40 7 velocidade Shimano
		\item Suporte de guidão alumínio ahead set preto Unicicle
		\item Guidão curvo expandido de aço preto importado
		\item Roda livre 7 velocidades Index Skyrano
		\item Câmbio dianteiro/traseiro Tz 31 sem gancheira Shimano
		\item Corrente fina Index IG 51
		\item Garfo de suspensão: 29 Over em aço/alumínio preto Verselli
		\item Quadro de alumínio: 29" GTMAX M7 19"
		\item Freio a disco dianteiro/traseiro Sypo 21 velocidades
	\end{itemize}

	Logo após a aquisição a bicicleta foi desmontada deixando o quadro como na Figura \ref{img:quadro_original_lateral} e \ref{img:quadro_original_fundo} para facilitar a obtenção das medidas e assim tornar possível a confecção do modelo CAD no Catia V5 com a adaptação eleita.
		
	\graphicspath{{figuras/}}
	\begin{figure}[!htb]
		\centering
		\includegraphics[width=0.5\textwidth]{quadro_original_lateral.jpg}
		\caption{Quadro original (vista lateral)}
		\label{img:quadro_original_lateral}
	\end{figure}
	
	\newpage

	\graphicspath{{figuras/}}
	\begin{figure}[!htb]
		\centering
		\includegraphics[width=0.3\textwidth]{quadro_original_fundo.jpg}
		\caption{Detalhe do fundo do quadro original}
		\label{img:quadro_original_fundo}
	\end{figure}
	
	Nas Figuras \ref{img:inter_render} e \ref{img:inter_cotas} é possível visualizar  o resultado da modelagem e algumas cotas importantes para o desenvolvimento do projeto.
	
	\graphicspath{{figuras/}}
	\begin{figure}[!htb]
		\centering
		\includegraphics[scale=0.035]{inter_render_2.jpg}
		\includegraphics[scale=0.035]{inter_render_1.jpg}
		\caption{Quadro renderizado no Catia V5}
		\label{img:inter_render}
	\end{figure}
	

	%\graphicspath{{figuras/}}
	%\begin{figure}[h!]
	%	\centering
	%	\includegraphics[scale=0.05]{inter_render_2.jpg}
	%	\caption{Detalhe do fundo do quadro original}
	%	\label{img:inter_render}
	%\end{figure}

	%\graphicspath{{figuras/}}
	%\begin{figure}[h!]
	%	\centering
	%	\includegraphics[scale=0.05]{inter_render_1.jpg}
	%	\caption{Detalhe do fundo do quadro original}
	%	\label{img:inter_render_1}
	%\end{figure}
	
	\graphicspath{{figuras/}}
	\begin{figure}[H]
		\centering
		\includegraphics[width=0.6\textwidth]{inter_cotas.jpg}
		\caption{Detalhe do fundo do quadro original}
		\label{img:inter_cotas}
	\end{figure}
	
	\subsection{Análises}
	
	Com base no público alvo e no dimensionamento levantado pelos demais subsistemas, arbitrou-se a força peso do ciclista e do conjunto dispositivos que serão postos sobre a adaptação como 900 e 120, respectivamente. A aplicação delas estão representadas nas Figuras \ref{img:inter_F120} e \ref{img:inter_F900}. 
	
	
	%\graphicspath{{figuras/}}
	\begin{figure}[!htb]
		\centering
		\includegraphics[width=0.5\textwidth]{inter_F120.png}
		\caption{Força aplicada na adaptação}
		\label{img:inter_F120}
	\end{figure}
	
	%\graphicspath{{figuras/}}
	\begin{figure}[H]
		\centering
		\includegraphics[width=0.5\textwidth]{inter_F900.png}
		\caption{Força peso do ciclista}
		\label{img:inter_F900}
	\end{figure}
	
	Como esses dados foi feito a análise estática no Ansys, nas Figuras \ref{img:inter_deformacao_total}, \ref{img:inter_von-Mises}, \ref{img:inter_fator_de_seguranca} e \ref{img:inter_fadiga} representam, respectivamente, os gradientes de: deformação, equivalente de von-Mises, fator de segurança e fadiga.
	
	%\graphicspath{{figuras/}}
	\begin{figure}[!htb]
		\centering
		\includegraphics[width=0.7\textwidth]{inter_deformacao_total.png}
		\caption{Deformação total}
		\label{img:inter_deformacao_total}
	\end{figure}
	
	\newpage
	%\graphicspath{{figuras/}}
	\begin{figure}[!htb]
		\centering
		\includegraphics[width=0.7\textwidth]{inter_von-Mises.png}
		\caption{Equivalente de von-Mises}
		\label{img:inter_von-Mises}
	\end{figure}
	
	%\graphicspath{{figuras/}}
	\begin{figure}[!htb]
		\centering
		\includegraphics[width=0.7\textwidth]{inter_fator_de_seguranca.png}
		\caption{Fator de segurança}
		\label{img:inter_fator_de_seguranca}
	\end{figure}

	%\graphicspath{{figuras/}}
	\begin{figure}[!htb]
		\centering
		\includegraphics[width=0.7\textwidth]{inter_fadiga.png}
		\caption{Fadiga}
		\label{img:inter_fadiga}
	\end{figure}
	Os resultados mostram que a estrutura proposta atende a todos os requisitos do estudados no âmbito estático.
	
	\subsection{Adaptação do Quadro}
	
	Com a validação numérica do modelo, prosseguiu-se para a etapa de confecção do mesmo onde primeiramente foram feitos cortes no quadro original para retirar o tubo inferior como pode ser visto nas Figuras \ref{img:quadro_cerrado_lateral}, \ref{img:quadro_cerrado_1} e \ref{img:quadro_cerrado_2}.
	
		
	%\graphicspath{{figuras/}}
	\begin{figure}[!htb]
		\centering
		\includegraphics[width=0.7\textwidth]{quadro_cerrado_lateral.jpg}
		\caption{Quadro cerrado e lixado (vista lateral)}
		\label{img:quadro_cerrado_lateral}
	\end{figure}
	
	\newpage
	
	%\graphicspath{{figuras/}}
	\begin{figure}[!htb]
		\centering
		\includegraphics[width=0.3\textwidth]{quadro_cerrado_1.jpg}
		\caption{Quadro cerrado e lixado (detalhe 1)}
		\label{img:quadro_cerrado_1}
	\end{figure}
	
	%\graphicspath{{figuras/}}
	\begin{figure}[!htb]
		\centering
		\includegraphics[width=0.3\textwidth]{quadro_cerrado_2.jpg}
		\caption{Quadro cerrado e lixado (detalhe 2)}
		\label{img:quadro_cerrado_2}
	\end{figure}
	
	Para a construção da parte inferior do quadro foram utilizados tubos de alumínio 6060 com 1” de diâmetro e 1/8” de espessura. Primeiramente foram feitas as dobras dos tubos e verificados os ângulos através da impressão em papel A1 do drafting da peça, o desenho técnico utilizado no gabarito pode ser visto no Apêndice \ref*{gabarito}. Depois de feitas as dobras seguiu-se para o corte das quatro peças centrais. Com as quatro peças centrais prontas e as outras duas dobradas, prosseguiu-se para o processo de solda da peça completa e finalmente para a implementação da peça ao quadro.
	
	\newpage
	
	%\graphicspath{{figuras/}}	
	\begin{figure}[!htb]
		\centering
		\includegraphics[height=\textwidth,angle=-90]{gabarito.jpg}
		\includegraphics[width=\textwidth]{gabarito_adap.jpg}
		\caption{Gabarito e adaptação}
		\label{img:gabarito_adap}
	\end{figure}

	Durante o processo de dobra dos tubos de alumínio, foi notado a impossibilidade de conseguir fazer uma dobra igual a pré determinada pelo drafting, por falta de equipamento para tal, desta forma adaptamos para com que a dobra feita fosse satisfatória.
	
	Todo o processo de construção foi auxiliado pelo prestador de serviços especializado em solda em alumínio, Mateus Silva de Almeida, desde o corte do quadro à solda, sendo que esta última etapa foi inteiramente realizada por ele. A adaptação fez-se necessária para suportar todos os componentes eletroeletrônicos que a bicicleta elétrica transportará.
	
	A Figura \ref{img:quadro_adap_1} mostra o produto final oriundo da adaptação do quadro.

\newpage

	\graphicspath{{figuras/}}	
	\begin{figure}[h!]
		\centering
		\includegraphics[width=0.7\textwidth]{quadro_adap_1.jpg}
		\caption{Quadro com a adaptação}
		\label{img:quadro_adap_1}
	\end{figure}
	
	Para viabilizar o projeto já descrito acima foram necessários os gastos listados na Tabela \ref*{custo_dos_materiais_da_estrutura} a seguir:
	
	
	\newcolumntype{M}[1]{>{\centering\arraybackslash}m{#1}}
	\begin{table}[H]
		\centering
		\caption{Custos da Adaptação}
		\begin{tabular}{|M{6cm} | M{3,5cm} |}
			\hline
			\textbf{MATERIAL} & \textbf{Preço(R\$)} \\ \hline
			Bicicleta M7 GTMAX usada & 700,00 \\
			\hline
			Solda de adaptação do quadro & 250,00\\
			\hline
			Quatro metros de tubos de alumínio 6060, 1” de diâmetro, 1/8” de parede. & 100,00\\
			\hline
			Impressão em Folha A1 & 6,00\\
			\hline
			Desmontagem da corrente & 15,00\\
			\hline
			\textbf{Total} & \textbf{1071,00}\\
			\hline
			
		\end{tabular}
		\label{custo_dos_materiais_da_estrutura}
	\end{table}
	
	\subsection{Compartimento e Módulo de Baterias}
	Para possibilitar uma maior comodidade ao usuário, foi incluída ao projeto a opção de retirar o banco de baterias, facilitando o carregamento externo. Em seguida, definiu-se um compartimento que seria capaz de comportar a placa responsável pelo acionamento do motor e recuperação de energia e uma caixa contendo as baterias.
	
	Para a caixa das baterias e placas eletrônicas foi escolhido a madeira MDF (Medium Density Fiberboard), como material. O MDF foi escolhido devido ao seu baixo custo, facilidade de manuseio e por apresentar especificações mecânicas suficientes para o projeto. O MDF possui baixa condutividade térmica, podendo atuar como isolante térmico e apresenta resistência a variação de temperatura, não conduz eletricidade e tem uma boa resistência mecânica e elástica.
	
	A partir desses requisitos juntamente com as necessidades dos outros subsistemas, criou-se o modelo em ambiente CAD para verificar se a geometria propostar atendia a demanda. O resultado pode ser visto nas Figuras \ref{img:box_iso2} \ref{img:box_frontal} \ref{img:box_lesquerda}, \ref{img:box_ldireita} e \ref{img:box_traseira}, apresentadas a seguir.
	
		\graphicspath{{figuras/}}	
		\begin{figure}[H]
			\centering
			\includegraphics[width=0.5\textwidth]{box_iso2.png}
			\caption{Visão isométrica do conjunto}
			\label{img:box_iso2}
		\end{figure}
		\graphicspath{{figuras/}}	
		\begin{figure}[H]
			\centering
			\includegraphics[width=0.5\textwidth]{box_frontal.png}
			\caption{Visão frontal do conjunto}
			\label{img:box_frontal}
		\end{figure}
		\begin{comment}	
		\graphicspath{{figuras/}}	
		\begin{figure}[H]
			\centering
			\includegraphics[width=0.4\textwidth]{box_inferior.png}
			\caption{Visão inferior do conjunto}
			\label{img:box_inferior}
		\end{figure}
		\end{comment}		
			\graphicspath{{figuras/}}	
		\begin{figure}[H]
			\centering
			\includegraphics[width=0.5\textwidth]{box_lesquerda.png}
			\caption{Visão lateral esquerda do conjunto}
			\label{img:box_lesquerda}
		\end{figure}
		\graphicspath{{figuras/}}	
		\begin{figure}[h!]
			\centering
			\includegraphics[width=0.5\textwidth]{box_ldireita.png}
			\caption{Visão lateral direita do conjunto}
			\label{img:box_ldireita}
		\end{figure}
		\graphicspath{{figuras/}}	
		\begin{figure}[h!]
			\centering
			\includegraphics[width=0.5\textwidth]{box_traseira.png}
			\caption{Visão traseira do conjunto}
			\label{img:box_traseira}
		\end{figure}
	
		\begin{comment}
		\graphicspath{{figuras/}}	
		\begin{figure}[H]
			\centering
			\includegraphics[width=0.7\textwidth]{box_fechada.png}
			\caption{Visão da caixa principal com a porta fechada}
			\label{img:box_fechada}
		\end{figure}
		\end{comment}
	\subsubsection{Processo de fabricação do compartimento}
	O processo de fabricação foi dividido em duas etapas, a caixa das baterias e compartimento principal. Para esse fim foram adquiridas placas de 12mm de espessura de MDF cru, 100 parafusos de 3,5x30mm, 30 parafusos de 3x12mm, 2 lixas para madeira Nº 120, 2 dobradiças pequenas, 1 trinco pequeno, 6 abraçadeiras de 1’’, MDF revestido de 6mm e uma lata de tinta spray preta. A tabela \ref{tab:custo_compartimento} indica a lista de materiais e seus respectivos custos.
	\newcolumntype{M}[1]{>{\centering\arraybackslash}m{#1}}
	\begin{table}[H]
		\centering
		\caption{Custo dos Materiais da Estrutura}
		\begin{tabular}{|M{6cm} | M{3,5cm} |}
			\hline
			\textbf{MATERIAL} & \textbf{Preço(R\$)} \\ \hline
			MDF cru 12mm de espessura & Cedido \\
			\hline
			MDF revestido de 6mm & Cedido\\
			\hline
			6 abraçadeiras de 1’’ & 4,20\\
			\hline
			100 parafusos de 3,5x30mm & 2,60\\
			\hline
			30 parafusos de 3x12mm & 2,10\\
			\hline
			2 lixas para madeira Nº 120 & 1,10\\
			\hline
			2 dobradiças pequenas & 2,00 \\
			\hline
			2 trinco pequeno & 3,00\\
			\hline
			1 lata de tinta spray preta & Cedida \\
			\hline
			\textbf{Total} & \textbf{15,00}\\
			\hline
			
		\end{tabular}
		\label{tab:custo_compartimento}
	\end{table}
	A caixa das baterias foi produzida a partir de cinco peças, sendo elas, uma base, duas laterais e , uma parte frontal e outra traseira. As partes laterais e a base são compostas por MDF de 12 mm e as partes frontal e traseira foram feitas com MDF revestido de 6mm. Para o corte das madeiras foram utilizados uma serra de mesa e uma serra tico-tico. Para a fixação das peças foram utilizados uma furadeira/parafusadeira. O processo de montagem consistiu em utilizar a furadeira com uma broca de 2,5mm para perfurar um furo guia nas madeiras e a partir dessa guia executar o parafusamento direto.
	
	O compartimento principal foi produzido a partir de oito peças, sendo elas, uma base, uma parte lateral maior, uma lateral menor, uma porta, uma parte traseira, uma parte frontal e duas partes superiores. As duas partes superiores são compostas com MDF revestido de 6mm e as outras partes foram feitas com o MDF de 12mm. O processo de fabricação dao compartimento foi o mesmo da caixa das baterias.
	
	Para a caixa das baterias foram utilizados 16 parafusos 3,5x30mm, sendo 5 na parte frontal, 7 na parte traseira e 4 na base. Na caixa principal foram utilizados 21 parafusos 3,5x30mm, sendo 2 nas laterais, 7 na parte superior, 10 na base e 2 na parte traseira. Para as dobradiças foram utilizados 8 parafusos 3x12mm, para o trinco foram 6 e para as abraçadeiras foram 24 parafusos.
	
	A pintura da parte externa da caixa principal foi feita após sua montagem. Para a pintura, primeiramente foi lixada toda a parte externa a ser pintada, após ser lixada foi feita a pintura direta com uma tinta spray preta. A aplicação da tinta foi feita de forma direta com aplicações cadenciadas. O mesmo foi feito para toda a bicicleta.
	
	Para a fixação da porta na caixa principal foram utilizados os parafusos de 3x12mm para parafusar as duas dobradiças, e o trinco que une a porta e a parte lateral menor. 
	
	Para fixar a caixa principal no quadro da bicicleta foram utilizadas abraçadeiras de uma polegada (1”). Primeiro foi aferida uma medição para o encaixe ser feito de forma a não ter nenhuma possibilidade de contato entre a caixa principal e os pedais/biela. Feita a medição seguiu-se para o parafusamento direto dos parafusos de 3x12mm nas abraçadeiras. O arranjo das abraçadeiras na base da caixa principal foi feito de forma a garantir a impossibilidade da caixa se movimentar para qualquer direção, ficando completamente fixa ao quadro. 
	O produto final está exibido nas Figuras \ref{img:box_baterias}, \ref{img:box_vazia}, \ref{img:box_baterias} \ref{img:box_cheia} e \ref{img:box_fechada2} a seguir.
	\graphicspath{{figuras/}}	
	\begin{figure}[h!]
		\centering
		\includegraphics[width=0.5\textwidth]{baterias.jpg}
			\caption{Caixa de baterias}
		\label{img:box_baterias}
	\end{figure}
	\graphicspath{{figuras/}}	
	\begin{figure}[h!]
		\centering
		\includegraphics[width=0.5\textwidth]{box_vazia.jpg}
		\caption{Bicicleta com o compartimento aberto}
		\label{img:box_vazia}
	\end{figure}
	
	\graphicspath{{figuras/}}	
	\begin{figure}[h!]
		\centering
		\includegraphics[width=0.5\textwidth]{box_cheia.jpg}
		\caption{Bicicleta com a caixa de baterias}
		\label{img:box_cheia}
	\end{figure}
	

	\graphicspath{{figuras/}}	
	\begin{figure}[H]
		\centering
		\includegraphics[width=0.5\textwidth]{box_fechada2.jpg}
		\caption{Bicicleta com o compartimento fechado}
		\label{img:box_fechada2}
	\end{figure}

	\begin{comment}
	\graphicspath{{figuras/}}	
		\begin{figure}[H]
		\centering
		\includegraphics[width=0.5\textwidth]{box_lateral.jpg}
		\caption{Visão lateral direita do conjunto}
		\label{img:box_lateral}
	\end{figure}
	\end{comment}
		
	\subsection{Estabilidade da Bicicleta}
	Após a conclusão de todas as etapas de construção e adaptação da bicicleta, calculou-se os dados referentes a estabilidade da mesma, desta vez, com os componentes eletroeletrônicos.
	
	O centro de massa da bicicleta concentrou-se em 0,61 m no eixo x e 0,45 no eixo y, já as forças normais nos pneus traseiro e dianteiro(Nr e Nf) foram de, respectivamente: 13,35N e 285,8N, enquanto as forças de fricção(atrito) nos pneus traseiro e dianteiro (Fr e Ff): 4,005N e 85,74N.
	
	Já no caso de um usuário com uma massa de 90 kg, os dados são alterados da seguinte forma. O centro de massa no eixo x encontrado é de 0,57 m enquanto em y permanece o mesmo valor, 0,45 m. Para as forças normais nos pneus traseiro e dianteiro encontrou-se,respectivamente, 52,2N e 1127,7N e para o caso das forças de fricção, encontrou-se nos pneus traseiro e dianteiro,respectivamente, 15,66N e 338,31N.
	
	Observou-se uma mudança no centro de massa referente a adição das baterias e, posteriormente, a presença de um ciclista de massa já especificada e também comentado no escopo. O comportamento dessas forças foi ilustrado anteriormente nas 
	Figuras \ref{img:esq_forca_sem_frenagem}, \ref{img:esq_forca_com_frenagem_suave} e \ref{img:esq_forca_com_frenagem_brusca}.
	
	A partir dos dados observados anteriormente e comparando-os com os atuais e finais, foi possível notar as mudanças do centro de massa para a região mais próxima do início da bicicleta, devido a uma maior concentração de massa adicionada (as baterias e o cliente) na região(as baterias e o cliente) frontal, enquanto no eixo horizontal não houve alteração, seu centro de massa permanece constante no meio da bicicleta. Esta variação também foi reparada nas forças de reação, ela também se deve ao aumento da massa nodo sistema. Esta alteração já era esperada, tornando possível planejar o projeto com segurança e o tornando viável.

	\subsection{Homologação}
	
	Para definir o plano de teste, estabeleceu-se como uma espécie de medida a rodagem por Km de forma que fosse possível observar o comportamento da estrutura ao longo dos trajetos. Ao longo de 6Km percorridos, notou-se um problema com a roda traseira e com a corrente utilizada, desta forma, foi necessário realizar a troca de ambos os componentes.
	A exceção dos problemas já apresentados, a estrutura da bicicleta não apresentou nenhum outro problema e o teste ocorreu sem mais nenhuma outra adversidade.
	\subsection{Análise crítica de projeto e desenvolvimento}
		
		\subsubsection{O que foi feito}
		Foi feita a adaptação do quadro de uma bicicleta comum. Para isso foi cortada a parte de baixo do quadro, produzida uma peça que serviria de base, onde iria um compartimento para as baterias e as placas eletrônicas. Para a produção dessa base, foi necessária a compra de tubos de alumínio e para a fabricação foi necessário dobrar os tubos, cortar e soldar no quadro da bicicleta. Para o compartimento das baterias foram feitas caixas tanto para as baterias quanto para todo o sistema placas eletrônicas/baterias, de forma a garantir a segurança dos equipamentos e do ciclista. 
		
		\subsubsection{Problemas encontrados durante o projeto}
		Não foi possível a produção completa de um quadro de bicicleta, o que fez com que buscássemos a alternativa de adaptar um quadro comum de mercado.  
		Foi necessário o desenvolvimento de vários desenhos do compartimento onde estão as baterias e placas eletrônicas, porque existe um limite de dimensões no quadro.
		
		O projeto inicialmente foi desenhado para as placas de madeira terem 9mm, porém só foi possível obter placas de 12mm adquiridas de partes que já estavam cortadas na madeireira. Não foi possível obter placas de 9mm pois as madeireiras só vendem placas de 2750x1850mm, equivalente a 5,0875 metros quadrados, e no projeto utilizou-se cerca de 0,5 metros quadrados, e as placas inteiras estavam fora do orçamento.


  \section{Normas}
  Para garantir a integridade e segurança do projeto e dos futuros usuários do produto, deve-se atentar a determinadas normas técnicas, que garantem a funcionalidade do projeto. Essas normas ajudam a definir diversas características de um produto, visando uma padronização que auxilia na solução de futuros problemas, assegurando a qualidade e eficiência desejada. No Brasil, a Agência Brasileira de Normas Técnicas (ABNT) é o órgão responsável pela elaboração das Normas Técnicas Brasileiras (NBR), que servem como instrumento na avaliação de conformidades e certificação de diversas áreas e produtos, garantindo a devida credibilidade. Para o caso da Smart Bike, alguns itens importantes podem ser destacados diante da NBR NM 213, que é uma norma específica voltada para Princípios de Projeto e Segurança de Equipamentos Eletromecânicos.
  


\begin{table}[!htb]
	\centering
	\caption{Tabela de Normas}
	\resizebox{\textwidth}{!}{
	\begin{tabular}{|M{2,5cm} | M{4,5cm} | M{9cm}|}
		\hline
		\textbf{ITEM AVALIADO} & \textbf{MEDIDA NORMATIVA} & \textbf{O QUE SERÁ FEITO?} \\ \hline
		Arestas vivas, ângulos vivos, peças salientes, etc. & Prevenir, durante o uso da bicicleta, o acesso do usuário aos pontos de risco. & Será feita uma análise do projeto estrutural para proteger, cercar e alinhar qualquer design estrutural que fornecer perigo físico ao usuário. \\
		\hline
		Formas e posição de componentes & Garantir que os componentes sejam posicionados da forma mais adequada ao projeto e a segurança do usuário. & Os componentes serão posicionados de maneira otimizada com sua função, evitando gambiarras e grandes conexões. Os motores e baterias não serão acessíveis ao usuário enquanto o mesmo estiver pedalando. \\
		\hline
		Ergonomia & Reduzir as tensões nervosas e o esforço físico do usuário. & A bicicleta terá, no seu banco e guidon, regulagem de altura para garantir ao usuário o maior conforto possível. \\
		\hline
		Sistema de comando & Garantir o acesso do usuário à informações gerais do sistema, assim como, sua intervenção. & Através de um display o usuário será capaz de saber as principais informações de operação da bicicleta, como nível de carga da bateria e velocidade. O usuário poderá cessar o funcionamento do motor através de um simples botão de partida. \\
		\hline
		Perigo Elétrico & Proteções contra choques elétricos, curtos circuitos e sobrecargas. & Haverá uma blindagem no circuito elétrico para proteger o usuário do acesso as conexões elétricas que alimentam a bateria e o motor. \\
		\hline
		Estrutura & Robustez & A estrutura será projetada para suportar determinadas cargas de peso e fadiga que serão submetidas à bicicleta. \\
		\hline
		Exigências gerais, avisos, instruções. & Deve existir clareza nas informações de operação. & O acionamento do motor será feito por uma chave de partida simples que, automaticamente, irá ligar todo o sistema de controle, tornando acessível a utilização do usuário ao sistema. \\
		\hline
		Documento de acompanhamento & Manual de instrução & Será elaborado um documento abordando os itens de segurança, utilização, armazenamento, situações de emergência, etc. \\
		\hline
		Medidas adicionais & Medidas previstas para situações de emergência. & Será elaborado um dispositivo de parada de emergência técnica, trazendo a operação da bicicleta para o modo manual. \\
		\hline
		Manutenção & Considerar fatores que facilitem a manutenabilidade do sistema. & A estrutura será montada de maneira que torne fácil o acesso as partes e sistemas internos. \\
		\hline
	\end{tabular}
}
	\label{tabela_normas}
\end{table}

\begin{comment}
	\begin{table}[!htbp]
	\centering
	\caption{Tabela de Normas}
	\label{tabela_normas1}
	\begin{tabular}{|lll|}
	\hline
	\multicolumn{1}{|l|}{\textbf{ITEM AVALIADO}}                                                   & \multicolumn{1}{l|}{\textbf{MEDIDA NORMATIVA}}                                                                                                             & \textbf{O QUE SERÁ FEITO?}                                                                                                                                                                                                                                                                        \\ \hline
	\begin{tabular}[c]{@{}l@{}}Arestas vivas, ângulos vivos, \\ peças salientes, etc.\end{tabular} & \begin{tabular}[c]{@{}l@{}}Prevenir, durante o uso \\ da bicicleta, o acesso do \\ usuário aos pontos de risco\end{tabular}                                & \begin{tabular}[c]{@{}l@{}}Será feita uma análise do projeto estrutural \\ para proteger, cercar e alinhar qualquer design \\ estrutural que fornecer perigo físico ao usuário\end{tabular}                                                                                                       \\ \hline
	\begin{tabular}[c]{@{}l@{}}Formas e posição de \\ componentes\end{tabular}                     & \begin{tabular}[c]{@{}l@{}}Garantir que os componentes \\ sejam posicionados da forma \\ mais adequada ao projeto e a \\ segurança do usuário\end{tabular} & \begin{tabular}[c]{@{}l@{}}Os componentes serão posicionados de \\ maneira otimizada com sua função, \\ evitando gambiarras e grandes conexões. \\ Os motores e baterias não serão acessíveis \\ ao usuário enquanto o mesmo estiver pedalando.\end{tabular}                                      \\ \hline
	Ergonomia                                                                                      & \begin{tabular}[c]{@{}l@{}}Reduzir as tensões nervosas e \\ o esforço físico do usuário.\end{tabular}                                                      & \begin{tabular}[c]{@{}l@{}}A bicicleta terá, no seu banco e guidon, regulagem \\ de altura para garantir ao usuário o maior conforto possível\end{tabular}                                                                                                                                        \\ \hline
	Sistema de comando                                                                             & \begin{tabular}[c]{@{}l@{}}Garantir o acesso do usuário à \\ informações gerais do sistema,\\ assim como, sua intervenção.\end{tabular}                    & \begin{tabular}[c]{@{}l@{}}Através de um display o usuário será capaz de saber \\ as principais informações de operação da bicicleta, \\ como nível de carga da bateria e velocidade. O usuário \\ poderá cessar o funcionamento do motor através de \\ um simples botão de partida.\end{tabular} \\ \hline
	Perigo Elétrico                                                                                & \begin{tabular}[c]{@{}l@{}}Proteções contra choques elétricos, \\ curtos circuitos e sobrecargas\end{tabular}                                              & \begin{tabular}[c]{@{}l@{}}Haverá uma blindagem no circuito elétrico para \\ proteger o usuário do acesso as conexões elétricas \\ que alimentam a bateria e o motor\end{tabular}                                                                                                                 \\ \hline
	Estrutura                                                                                      & Robustez                                                                                                                                                   & \begin{tabular}[c]{@{}l@{}}A estrutura será projetada para suportar determinadas \\ cargas de peso e fadiga que serão submetidas à bicicleta.\end{tabular}                                                                                                                                        \\ \hline
	\begin{tabular}[c]{@{}l@{}}Exigências gerais, \\ avisos, instruções\end{tabular}               & \begin{tabular}[c]{@{}l@{}}Deve existir clareza nas \\ informações de operação\end{tabular}                                                                & \begin{tabular}[c]{@{}l@{}}O acionamento do motor será feito por uma chave de \\ partida simples que, automaticamente, irá ligar todo o \\ sistema de controle, tornando acessível a utilização \\ do usuário ao sistema\end{tabular}                                                             \\ \hline
	Documento de acompanhamento                                                                    & Manual de instrução                                                                                                                                        & \begin{tabular}[c]{@{}l@{}}Será elaborado um documento abordando os itens \\ de segurança, utilização, armazenamento, situações de \\ emergência, etc.\end{tabular}                                                                                                                               \\ \hline
	Medidas adicionais                                                                             & \begin{tabular}[c]{@{}l@{}}Medidas previstas para situações \\ de emergência\end{tabular}                                                                  & \begin{tabular}[c]{@{}l@{}}Será elaborado um dispositivo de parada de emergência\\  técnica, trazendo a operação da bicicleta para o \\ modo manual.\end{tabular}                                                                                                                                 \\ \hline
	Manutenção                                                                                     & \begin{tabular}[c]{@{}l@{}}Considerar fatores que facilitem a \\ manutenabilidade do sistema\end{tabular}                                                  & \begin{tabular}[c]{@{}l@{}}A estrutura será montada de maneira que torne fácil \\ o acesso as partes e sistemas internos.\end{tabular}                                                                                                                                                            \\ \hline
	\end{tabular}
	\end{table}
\end{comment}

